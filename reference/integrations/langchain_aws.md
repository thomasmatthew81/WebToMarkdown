# Web Content Collection

> A collection of 1 web pages converted to Markdown format. Generated on 2025-11-15 15:03:25.

## Converted Web Pages

### AWS | LangChain Reference

**Source:** https://reference.langchain.com/python/integrations/langchain_aws/

Skip to content 

[ ](https://github.com/langchain-ai/docs/tree/main/reference/python/docs/integrations/langchain_aws.md "Edit this page")

#  `langchain-aws`¶

[](https://pypi.org/project/langchain-aws/#history) [](https://opensource.org/licenses/MIT) [](https://pypistats.org/packages/langchain-aws)

Note

This package ref has not yet been fully migrated to v1.

Reference docs

This page contains **reference documentation** for AWS. See [the docs](https://docs.langchain.com/oss/python/integrations/providers/aws) for conceptual guides, tutorials, and examples on using AWS modules.

##  `` langchain_aws ¶

FUNCTION | DESCRIPTION  
---|---  
`create_neptune_opencypher_qa_chain` |  Chain for question-answering against a Neptune graph  
`create_neptune_sparql_qa_chain` |  Chain for question-answering against a Neptune graph  
  
###  `` ChatBedrock ¶

Bases: `[BaseChatModel](../../langchain_core/language_models/#langchain_core.language_models.BaseChatModel "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseChatModel</span> \(<code>langchain_core.language_models.BaseChatModel</code>\)")`, `BedrockBase`

A chat model that uses the Bedrock API.

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Transform a single input into an output.  
`ainvoke` |  Transform a single input into an output.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
`set_verbose` |  If verbose is `None`, set it.  
`generate_prompt` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate_prompt` |  Asynchronously pass a sequence of prompts and return model generations.  
`validate_environment` |  Validate that AWS credentials to and python package exists in environment.  
`generate` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate` |  Asynchronously pass a sequence of prompts to a model and return generations.  
`dict` |  Return a dictionary of the LLM.  
`is_lc_serializable` |  Return whether this model can be serialized by Langchain.  
`get_lc_namespace` |  Get the namespace of the langchain object.  
`build_extra` |  Build extra kwargs from additional params that were passed in.  
`get_num_tokens_from_messages` |  Get the number of tokens in the messages.  
`get_num_tokens` |  Get the number of tokens present in the text.  
`get_token_ids` |  Return the ordered IDs of the tokens in a text.  
`set_system_prompt_with_tools` |  Workaround to bind. Sets the system prompt with tools  
`bind_tools` |  Bind tool-like objects to this chat model.  
`with_structured_output` |  Model wrapper that returns outputs formatted to match the given schema.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [TypeAlias](https://docs.python.org/3/library/typing.html#typing.TypeAlias "<code>typing.TypeAlias</code>")
    

Get the input type for this `Runnable`.

####  `` OutputType `property` ¶
    
    
    OutputType: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Get the output type for this `Runnable`.

####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` cache `class-attribute` `instance-attribute` ¶
    
    
    cache: [BaseCache](../../langchain_core/caches/#langchain_core.caches.BaseCache "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseCache</span> \(<code>langchain_core.caches.BaseCache</code>\)") | [bool](https://docs.python.org/3/library/functions.html#bool) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Whether to cache the response.

  * If `True`, will use the global cache.
  * If `False`, will not use a cache
  * If `None`, will use the global cache if it's set, otherwise no cache.
  * If instance of `BaseCache`, will use the provided cache.



Caching is not currently supported for streaming methods of models.

####  `` verbose `class-attribute` `instance-attribute` ¶
    
    
    verbose: [bool](https://docs.python.org/3/library/functions.html#bool) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default_factory=_get_verbosity, exclude=True, repr=False)
    

Whether to print out response text.

####  `` callbacks `class-attribute` `instance-attribute` ¶
    
    
    callbacks: Callbacks = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Callbacks to add to the run trace.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Tags to add to the run trace.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Metadata to add to the run trace.

####  `` custom_get_token_ids `class-attribute` `instance-attribute` ¶
    
    
    custom_get_token_ids: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[str](https://docs.python.org/3/library/stdtypes.html#str)], [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default=None, exclude=True
    )
    

Optional encoder to use for counting tokens.

####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock runtime client for making data plane API calls

####  `` bedrock_client `class-attribute` `instance-attribute` ¶
    
    
    bedrock_client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock client for making control plane API calls

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='region')
    

The aws region e.g., `us-west-2`. Falls back to `AWS_REGION` or `AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config` in case it is not provided here.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The name of the profile in the `~/.aws/credentials` or `~/.aws/config files`, which has either access keys or role information specified.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id.

If provided, `aws_secret_access_key` must also be provided.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS `secret_access_key`.

If provided, `aws_access_key_id` must also be provided.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token.

If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided.

Not required unless using temporary credentials.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SESSION_TOKEN` environment variable.

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional `botocore.config.Config` instance to pass to the client.

####  `` provider `class-attribute` `instance-attribute` ¶
    
    
    provider: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The model provider, e.g., `'amazon'`, `'cohere'`, `'ai21'`, etc. When not supplied, provider is extracted from the first part of the model_id e.g. `'amazon'` in `'amazon.titan-text-express-v1'`. This value should be provided for model IDs that do not have the provider in them, e.g., custom and provisioned models that have an ARN associated with them.

####  `` model_id `class-attribute` `instance-attribute` ¶
    
    
    model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(alias='model')
    

Id of the model to call, e.g., `'amazon.titan-text-express-v1'`, this is equivalent to the `modelId` property in the list-foundation-models api. For custom and provisioned models, an ARN value is expected.

####  `` base_model_id `class-attribute` `instance-attribute` ¶
    
    
    base_model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='base_model')
    

An optional field to pass the base model id. If provided, this will be used over the value of `model_id` to identify the base model.

####  `` model_kwargs `class-attribute` `instance-attribute` ¶
    
    
    model_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Keyword arguments to pass to the model.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Needed if you don't want to default to `'us-east-1'` endpoint

####  `` streaming `class-attribute` `instance-attribute` ¶
    
    
    streaming: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Whether to stream the results.

####  `` guardrails `class-attribute` `instance-attribute` ¶
    
    
    guardrails: [Mapping](https://docs.python.org/3/library/typing.html#typing.Mapping "<code>typing.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = {
        "trace": None,
        "guardrailIdentifier": None,
        "guardrailVersion": None,
    }
    

An optional dictionary to configure guardrails for Bedrock.

This field `guardrails` consists of two keys: `'guardrailId'` and `'guardrailVersion'`, which should be strings, but are initialized to None.

It's used to determine if specific guardrails are enabled and properly set.

Type

Optional[Mapping[str, str]]: A mapping with 'guardrailId' and 'guardrailVersion' keys.

Example
    
    
    llm = BedrockLLM(model_id="<model_id>", client=<bedrock_client>,
        model_kwargs={},
        guardrails={
                "guardrailId": "<guardrail_id>",
                "guardrailVersion": "<guardrail_version>"})
    

To enable tracing for guardrails, set the 'trace' key to True and pass a callback handler to the 'run_manager' parameter of the 'generate', '_call' methods.

Example
    
    
    llm = BedrockLLM(model_id="<model_id>", client=<bedrock_client>,
        model_kwargs={},
        guardrails={
                "guardrailId": "<guardrail_id>",
                "guardrailVersion": "<guardrail_version>",
                "trace": True},
        callbacks=[BedrockAsyncCallbackHandler()])
    

<https://python.langchain.com/docs/concepts/callbacks/> for more information on callback handlers.

class BedrockAsyncCallbackHandler(AsyncCallbackHandler): async def on_llm_error( self, error: BaseException, **kwargs: Any, ) -> Any: reason = kwargs.get("reason") if reason == "GUARDRAIL_INTERVENED": ...Logic to handle guardrail intervention...

####  `` rate_limiter `class-attribute` `instance-attribute` ¶
    
    
    rate_limiter: [BaseRateLimiter](../../langchain_core/rate_limiters/#langchain_core.rate_limiters.BaseRateLimiter "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.rate_limiters.BaseRateLimiter</span>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

An optional rate limiter to use for limiting the number of requests.

####  `` disable_streaming `class-attribute` `instance-attribute` ¶
    
    
    disable_streaming: [bool](https://docs.python.org/3/library/functions.html#bool) | [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['tool_calling'] = False
    

Whether to disable streaming for this model.

If streaming is bypassed, then `stream`/`astream`/`astream_events` will defer to `invoke`/`ainvoke`.

  * If `True`, will always bypass streaming case.
  * If `'tool_calling'`, will bypass streaming case only when the model is called with a `tools` keyword argument. In other words, LangChain will automatically switch to non-streaming behavior (`invoke`) only when the tools argument is provided. This offers the best of both worlds.
  * If `False` (Default), will always use streaming case if available.



The main reason for this flag is that code might be written using `stream` and a user may want to swap out a given model for another model whose the implementation does not properly support streaming.

####  `` output_version `class-attribute` `instance-attribute` ¶
    
    
    output_version: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=from_env("LC_OUTPUT_VERSION", default=None)
    )
    

Version of `AIMessage` output format to store in message content.

`AIMessage.content_blocks` will lazily parse the contents of `content` into a standard format. This flag can be used to additionally store the standard format in message content, e.g., for serialization purposes.

Supported values:

  * `'v0'`: provider-specific format in content (can lazily-parse with `content_blocks`)
  * `'v1'`: standardized format in content (consistent with `content_blocks`)



Partner packages (e.g., [`langchain-openai`](https://pypi.org/project/langchain-openai)) can also use this field to roll out new content formats in a backward-compatible way.

Added in `langchain-core` 1.0

####  `` profile `property` ¶
    
    
    profile: [ModelProfile](../../langchain_model_profiles/#langchain_model_profiles.ModelProfile "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ModelProfile</span> \(<code>langchain_model_profiles.ModelProfile</code>\)")
    

Return profiling information for the model.

This property relies on the `langchain-model-profiles` package to retrieve chat model capabilities, such as context window sizes and supported features.

RAISES | DESCRIPTION  
---|---  
`[ImportError](https://docs.python.org/3/library/exceptions.html#ImportError)` |  If `langchain-model-profiles` is not installed.  
RETURNS | DESCRIPTION  
---|---  
`[ModelProfile](../../langchain_model_profiles/#langchain_model_profiles.ModelProfile "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ModelProfile</span> \(<code>langchain_model_profiles.ModelProfile</code>\)")` |  A `ModelProfile` object containing profiling information for the model.  
  
####  `` beta_use_converse_api `class-attribute` `instance-attribute` ¶
    
    
    beta_use_converse_api: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Use the new Bedrock `converse` API which provides a standardized interface to all Bedrock models. Support still in beta. See ChatBedrockConverse docs for more.

####  `` stop_sequences `class-attribute` `instance-attribute` ¶
    
    
    stop_sequences: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='stop')
    

Stop sequence inference parameter from new Bedrock `converse` API providing a sequence of characters that causes a model to stop generating a response. See <https://docs.aws.amazon.com/bedrock/latest/APIReference/API_agent_InferenceConfiguration.html> for more.

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[AIMessageChunk](../../langchain/messages/#langchain.messages.AIMessageChunk "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessageChunk</span> \(<code>langchain_core.messages.AIMessageChunk</code>\)")]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[AIMessageChunk](../../langchain/messages/#langchain.messages.AIMessageChunk "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessageChunk</span> \(<code>langchain_core.messages.AIMessageChunk</code>\)")]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

####  `` set_verbose ¶
    
    
    set_verbose(verbose: [bool](https://docs.python.org/3/library/functions.html#bool) | None) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

If verbose is `None`, set it.

This allows users to pass in `None` as verbose to access the global setting.

PARAMETER | DESCRIPTION  
---|---  
`verbose` |  The verbosity setting to use. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool) | None`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  The verbosity setting to use.  
  
####  `` generate_prompt ¶
    
    
    generate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` agenerate_prompt `async` ¶
    
    
    agenerate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` validate_environment ¶
    
    
    validate_environment() -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Validate that AWS credentials to and python package exists in environment.

####  `` generate ¶
    
    
    generate(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`messages` |  List of list of messages. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`tags` |  The tags to apply. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`metadata` |  The metadata to apply. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None` **DEFAULT:** `None`  
`run_name` |  The name of the run. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`run_id` |  The ID of the run. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` agenerate `async` ¶
    
    
    agenerate(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`messages` |  List of list of messages. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`tags` |  The tags to apply. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`metadata` |  The metadata to apply. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None` **DEFAULT:** `None`  
`run_name` |  The name of the run. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`run_id` |  The ID of the run. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` dict ¶
    
    
    dict(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> dict
    

Return a dictionary of the LLM.

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Return whether this model can be serialized by Langchain.

####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the langchain object.

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  `["langchain", "chat_models", "bedrock"]`  
  
####  `` build_extra `classmethod` ¶
    
    
    build_extra(values: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]) -> [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Build extra kwargs from additional params that were passed in.

####  `` get_num_tokens_from_messages ¶
    
    
    get_num_tokens_from_messages(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")], tools: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>") | None = None
    ) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens in the messages.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

Note

  * The base implementation of `get_num_tokens_from_messages` ignores tool schemas.
  * The base implementation of `get_num_tokens_from_messages` adds additional prefixes to messages in represent user roles, which will add to the overall token count. Model-specific implementations may choose to handle this differently.



PARAMETER | DESCRIPTION  
---|---  
`messages` |  The message inputs to tokenize. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]`  
`tools` |  If provided, sequence of dict, `BaseModel`, function, or `BaseTool` objects to be converted to tool schemas. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The sum of the number of tokens across the messages.  
  
####  `` get_num_tokens ¶
    
    
    get_num_tokens(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens present in the text.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The integer number of tokens in the text.  
  
####  `` get_token_ids ¶
    
    
    get_token_ids(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]
    

Return the ordered IDs of the tokens in a text.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]` |  A list of IDs corresponding to the tokens in the text, in order they occur in the text.  
  
####  `` set_system_prompt_with_tools ¶
    
    
    set_system_prompt_with_tools(xml_tools_system_prompt: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> None
    

Workaround to bind. Sets the system prompt with tools

####  `` bind_tools ¶
    
    
    bind_tools(
        tools: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | TypeBaseModel | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>") | [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")],
        *,
        tool_choice: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [str](https://docs.python.org/3/library/stdtypes.html#str) | [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["auto", "none"] | [bool](https://docs.python.org/3/library/functions.html#bool) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")]
    

Bind tool-like objects to this chat model.

Assumes model has a tool calling API.

PARAMETER | DESCRIPTION  
---|---  
`tools` |  A list of tool definitions to bind to this chat model. Can be a dictionary, pydantic model, callable, or BaseTool. Pydantic models, callables, and BaseTools will be automatically converted to their schema dictionary representation. **TYPE:** `[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | TypeBaseModel | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>") | [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")]`  
`tool_choice` |  Which tool to require the model to call. Must be the name of the single provided function or "auto" to automatically determine which function to call (if any), or a dict of the form: {"type": "function", "function": {"name": <>}}. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | [str](https://docs.python.org/3/library/stdtypes.html#str) | [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['auto', 'none'] | [bool](https://docs.python.org/3/library/functions.html#bool) | None` **DEFAULT:** `None`  
`**kwargs` |  Any additional parameters to pass to the [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>") constructor. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
  
####  `` with_structured_output ¶
    
    
    with_structured_output(
        schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | TypeBaseModel | [Type](https://docs.python.org/3/library/typing.html#typing.Type "<code>typing.Type</code>"),
        *,
        include_raw: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Model wrapper that returns outputs formatted to match the given schema.

PARAMETER | DESCRIPTION  
---|---  
`schema` |  The output schema as a dict or a Pydantic class. If a Pydantic class then the model output will be an object of that class. If a dict then the model output will be a dict. With a Pydantic class the returned attributes will be validated, whereas with a dict they will not be. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | TypeBaseModel | [Type](https://docs.python.org/3/library/typing.html#typing.Type "<code>typing.Type</code>")`  
`include_raw` |  If `False` then only the parsed structured output is returned. If an error occurs during model output parsing it will be raised. If `True` then both the raw model response (a `BaseMessage`) and the parsed model response will be returned. If an error occurs during output parsing it will be caught and returned as well. The final output is always a `dict` with keys `'raw'`, `'parsed'`, and `'parsing_error'`. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Runnable that takes any ChatModel input. The output type depends on  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  include_raw and schema.  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  If include_raw is True then output is a dict with keys: raw: BaseMessage, parsed: Optional[_DictOrPydantic], parsing_error: Optional[BaseException],  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  If include_raw is False and schema is a Dict then the runnable outputs a Dict.  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  If include_raw is False and schema is a Type[BaseModel] then the runnable  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  outputs a BaseModel.  
Pydantic schema (include_raw=False):
    
    
    from langchain_aws.chat_models.bedrock import ChatBedrock
    from pydantic import BaseModel
    
    class AnswerWithJustification(BaseModel):
        '''An answer to the user question along with justification for the answer.'''
        answer: str
        justification: str
    
    llm = ChatBedrock(
        model_id="anthropic.claude-3-sonnet-20240229-v1:0",
        model_kwargs={"temperature": 0.001},
    )  # type: ignore[call-arg]
    structured_model = model.with_structured_output(AnswerWithJustification)
    
    structured_model.invoke("What weighs more a pound of bricks or a pound of feathers")
    
    # -> AnswerWithJustification(
    #     answer='They weigh the same',
    #     justification='Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ.'
    # )
    

Pydantic schema (include_raw=True):
    
    
    from langchain_aws.chat_models.bedrock import ChatBedrock
    from pydantic import BaseModel
    
    class AnswerWithJustification(BaseModel):
        '''An answer to the user question along with justification for the answer.'''
        answer: str
        justification: str
    
    model = ChatBedrock(
        model_id="anthropic.claude-3-sonnet-20240229-v1:0",
        model_kwargs={"temperature": 0.001},
    )  # type: ignore[call-arg]
    structured_model = model.with_structured_output(AnswerWithJustification, include_raw=True)
    
    structured_model.invoke("What weighs more a pound of bricks or a pound of feathers")
    # -> {
    #     'raw': AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_Ao02pnFYXD6GN1yzc0uXPsvF', 'function': {'arguments': '{"answer":"They weigh the same.","justification":"Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ."}', 'name': 'AnswerWithJustification'}, 'type': 'function'}]}),
    #     'parsed': AnswerWithJustification(answer='They weigh the same.', justification='Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ.'),
    #     'parsing_error': None
    # }
    

Dict schema (include_raw=False):
    
    
    from langchain_aws.chat_models.bedrock import ChatBedrock
    
    schema = {
        "name": "AnswerWithJustification",
        "description": "An answer to the user question along with justification for the answer.",
        "input_schema": {
            "type": "object",
            "properties": {
                "answer": {"type": "string"},
                "justification": {"type": "string"},
            },
            "required": ["answer", "justification"]
        }
    }
    model = ChatBedrock(
        model_id="anthropic.claude-3-sonnet-20240229-v1:0",
        model_kwargs={"temperature": 0.001},
    )  # type: ignore[call-arg]
    structured_model = model.with_structured_output(schema)
    
    structured_model.invoke("What weighs more a pound of bricks or a pound of feathers")
    # -> {
    #     'answer': 'They weigh the same',
    #     'justification': 'Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume and density of the two substances differ.'
    # }
    

###  `` ChatBedrockConverse ¶

Bases: `[BaseChatModel](../../langchain_core/language_models/#langchain_core.language_models.BaseChatModel "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseChatModel</span> \(<code>langchain_core.language_models.BaseChatModel</code>\)")`

Bedrock chat model integration built on the Bedrock converse API.

This implementation will eventually replace the existing ChatBedrock implementation once the Bedrock converse API has feature parity with older Bedrock API. Specifically the converse API does not yet support custom Bedrock models.

Setup

To use Amazon Bedrock make sure you've gone through all the steps described here: <https://docs.aws.amazon.com/bedrock/latest/userguide/setting-up.html>

Once that's completed, install the LangChain integration:
    
    
    pip install -U langchain-aws
    

Key init args — completion params: model: str Name of BedrockConverse model to use. temperature: float Sampling temperature. max_tokens: Optional[int] Max number of tokens to generate.

Key init args — client params: region_name: Optional[str] AWS region to use, e.g. 'us-west-2'. base_url: Optional[str] Bedrock endpoint to use. Needed if you don't want to default to us-east- 1 endpoint. credentials_profile_name: Optional[str] The name of the profile in the ~/.aws/credentials or ~/.aws/config files.

See full list of supported init args and their descriptions in the params section.

Instantiate
    
    
    from langchain_aws import ChatBedrockConverse
    
    model = ChatBedrockConverse(
        model="anthropic.claude-3-sonnet-20240229-v1:0",
        temperature=0,
        max_tokens=None,
        # other params...
    )
    

Invoke
    
    
    messages = [
        ("system", "You are a helpful translator. Translate the user sentence to French."),
        ("human", "I love programming."),
    ]
    model.invoke(messages)
    
    
    
    AIMessage(content=[{'type': 'text', 'text': "J'aime la programmation."}], response_metadata={'ResponseMetadata': {'RequestId': '9ef1e313-a4c1-4f79-b631-171f658d3c0e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 15 Jun 2024 01:19:24 GMT', 'content-type': 'application/json', 'content-length': '205', 'connection': 'keep-alive', 'x-amzn-requestid': '9ef1e313-a4c1-4f79-b631-171f658d3c0e'}, 'RetryAttempts': 0}, 'stopReason': 'end_turn', 'metrics': {'latencyMs': 609}}, id='run-754e152b-2b41-4784-9538-d40d71a5c3bc-0', usage_metadata={'input_tokens': 25, 'output_tokens': 11, 'total_tokens': 36})
    

Stream
    
    
    for chunk in model.stream(messages):
        print(chunk)
    
    
    
    AIMessageChunk(content=[], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'type': 'text', 'text': 'J', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': "'", 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': 'a', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': 'ime', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': ' la', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': ' programm', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': 'ation', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'text': '.', 'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[{'index': 0}], id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[], response_metadata={'stopReason': 'end_turn'}, id='run-da3c2606-4792-440a-ac66-72e0d1f6d117')
    AIMessageChunk(content=[], response_metadata={'metrics': {'latencyMs': 581}}, id='run-da3c2606-4792-440a-ac66-72e0d1f6d117', usage_metadata={'input_tokens': 25, 'output_tokens': 11, 'total_tokens': 36})
    
    
    
    stream = model.stream(messages)
    full = next(stream)
    for chunk in stream:
        full += chunk
    full
    
    
    
    AIMessageChunk(content=[{'type': 'text', 'text': "J'aime la programmation.", 'index': 0}], response_metadata={'stopReason': 'end_turn', 'metrics': {'latencyMs': 554}}, id='run-56a5a5e0-de86-412b-9835-624652dc3539', usage_metadata={'input_tokens': 25, 'output_tokens': 11, 'total_tokens': 36})
    

Tool calling
    
    
    from pydantic import BaseModel, Field
    
    class GetWeather(BaseModel):
        '''Get the current weather in a given location'''
    
        location: str = Field(..., description="The city and state, e.g. San Francisco, CA")
    
    class GetPopulation(BaseModel):
        '''Get the current population in a given location'''
    
        location: str = Field(..., description="The city and state, e.g. San Francisco, CA")
    
    model_with_tools = model.bind_tools([GetWeather, GetPopulation])
    ai_msg = model_with_tools.invoke("Which city is hotter today and which is bigger: LA or NY?")
    ai_msg.tool_calls
    
    
    
    [{'name': 'GetWeather',
      'args': {'location': 'Los Angeles, CA'},
      'id': 'tooluse_Mspi2igUTQygp-xbX6XGVw'},
     {'name': 'GetWeather',
      'args': {'location': 'New York, NY'},
      'id': 'tooluse_tOPHiDhvR2m0xF5_5tyqWg'},
     {'name': 'GetPopulation',
      'args': {'location': 'Los Angeles, CA'},
      'id': 'tooluse__gcY_klbSC-GqB-bF_pxNg'},
     {'name': 'GetPopulation',
      'args': {'location': 'New York, NY'},
      'id': 'tooluse_-1HSoGX0TQCSaIg7cdFy8Q'}]
    

See `ChatBedrockConverse.bind_tools()` method for more.

Structured output
    
    
    from typing import Optional
    
    from pydantic import BaseModel, Field
    
    class Joke(BaseModel):
        '''Joke to tell user.'''
    
        setup: str = Field(description="The setup of the joke")
        punchline: str = Field(description="The punchline to the joke")
        rating: Optional[int] = Field(description="How funny the joke is, from 1 to 10")
    
    structured_model = model.with_structured_output(Joke)
    structured_model.invoke("Tell me a joke about cats")
    
    
    
    Joke(setup='What do you call a cat that gets all dressed up?', punchline='A purrfessional!', rating=7)
    

See `ChatBedrockConverse.with_structured_output()` for more.

Extended thinking

Some models, such as Claude 3.7 Sonnet, support an extended thinking feature that outputs the step-by-step reasoning process that led to an answer.

To use it, specify the `thinking` parameter when initializing `ChatBedrockConverse` as shown below.

You will need to specify a token budget to use this feature. See usage example:
    
    
    from langchain_aws import ChatBedrockConverse
    
    thinking_params= {
        "thinking": {
            "type": "enabled",
            "budget_tokens": 2000
        }
    }
    
    model = ChatBedrockConverse(
        model="us.anthropic.claude-3-7-sonnet-20250219-v1:0",
        max_tokens=5000,
        region_name="us-west-2",
        additional_model_request_fields=thinking_params,
    )
    
    response = model.invoke("What is the cube root of 50.653?")
    print(response.content)
    
    
    
    [
        {'type': 'reasoning_content', 'reasoning_content': {'type': 'text', 'text': 'I need to calculate the cube root of... ', 'signature': '...'}},
        {'type': 'text', 'text': 'The cube root of 50.653 is...'}
    ]
    

Image input
    
    
    import base64
    import httpx
    from langchain_core.messages import HumanMessage
    
    image_url = "https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg"
    image_data = base64.b64encode(httpx.get(image_url).content).decode("utf-8")
    message = HumanMessage(
        content=[
            {"type": "text", "text": "describe the weather in this image"},
            {
                "type": "image",
                "source": {"type": "base64", "media_type": "image/jpeg", "data": image_data},
            },
        ],
    )
    ai_msg = model.invoke([message])
    ai_msg.content
    
    
    
    [{'type': 'text',
      'text': 'The image depicts a sunny day with a partly cloudy sky. The sky is a brilliant blue color with scattered white clouds drifting across. The lighting and cloud patterns suggest pleasant, mild weather conditions. The scene shows an open grassy field or meadow, indicating warm temperatures conducive for vegetation growth. Overall, the weather portrayed in this scenic outdoor image appears to be sunny with some clouds, likely representing a nice, comfortable day.'}]
    

Token usage
    
    
    ai_msg = model.invoke(messages)
    ai_msg.usage_metadata
    
    
    
    {'input_tokens': 25, 'output_tokens': 11, 'total_tokens': 36}
    

Response metadata 
    
    
    ai_msg = model.invoke(messages)
    ai_msg.response_metadata
    
    
    
    ```python
    {'ResponseMetadata': {'RequestId': '776a2a26-5946-45ae-859e-82dc5f12017c',
      'HTTPStatusCode': 200,
      'HTTPHeaders': {'date': 'Mon, 17 Jun 2024 01:37:05 GMT',
       'content-type': 'application/json',
       'content-length': '206',
       'connection': 'keep-alive',
       'x-amzn-requestid': '776a2a26-5946-45ae-859e-82dc5f12017c'},
      'RetryAttempts': 0},
     'stopReason': 'end_turn',
     'metrics': {'latencyMs': 1290}}
    ```
    

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Transform a single input into an output.  
`ainvoke` |  Transform a single input into an output.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
`set_verbose` |  If verbose is `None`, set it.  
`generate_prompt` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate_prompt` |  Asynchronously pass a sequence of prompts and return model generations.  
`get_token_ids` |  Return the ordered IDs of the tokens in a text.  
`get_num_tokens` |  Get the number of tokens present in the text.  
`generate` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate` |  Asynchronously pass a sequence of prompts to a model and return generations.  
`dict` |  Return a dictionary of the LLM.  
`create_cache_point` |  Create a prompt caching configuration for Bedrock.  
`build_extra` |  Build extra kwargs from additional params that were passed in.  
`validate_environment` |  Validate that AWS credentials to and python package exists in environment.  
`bind_tools` |  Bind tools to the model.  
`with_structured_output` |  Model wrapper that returns outputs formatted to match the given schema.  
`is_lc_serializable` |  Is this class serializable?  
`get_lc_namespace` |  Get the namespace of the LangChain object.  
`get_num_tokens_from_messages` |  Get the number of tokens in the messages using AWS Bedrock count_tokens API.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [TypeAlias](https://docs.python.org/3/library/typing.html#typing.TypeAlias "<code>typing.TypeAlias</code>")
    

Get the input type for this `Runnable`.

####  `` OutputType `property` ¶
    
    
    OutputType: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Get the output type for this `Runnable`.

####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` cache `class-attribute` `instance-attribute` ¶
    
    
    cache: [BaseCache](../../langchain_core/caches/#langchain_core.caches.BaseCache "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseCache</span> \(<code>langchain_core.caches.BaseCache</code>\)") | [bool](https://docs.python.org/3/library/functions.html#bool) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Whether to cache the response.

  * If `True`, will use the global cache.
  * If `False`, will not use a cache
  * If `None`, will use the global cache if it's set, otherwise no cache.
  * If instance of `BaseCache`, will use the provided cache.



Caching is not currently supported for streaming methods of models.

####  `` verbose `class-attribute` `instance-attribute` ¶
    
    
    verbose: [bool](https://docs.python.org/3/library/functions.html#bool) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default_factory=_get_verbosity, exclude=True, repr=False)
    

Whether to print out response text.

####  `` callbacks `class-attribute` `instance-attribute` ¶
    
    
    callbacks: Callbacks = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Callbacks to add to the run trace.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Tags to add to the run trace.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Metadata to add to the run trace.

####  `` custom_get_token_ids `class-attribute` `instance-attribute` ¶
    
    
    custom_get_token_ids: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[str](https://docs.python.org/3/library/stdtypes.html#str)], [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default=None, exclude=True
    )
    

Optional encoder to use for counting tokens.

####  `` rate_limiter `class-attribute` `instance-attribute` ¶
    
    
    rate_limiter: [BaseRateLimiter](../../langchain_core/rate_limiters/#langchain_core.rate_limiters.BaseRateLimiter "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.rate_limiters.BaseRateLimiter</span>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

An optional rate limiter to use for limiting the number of requests.

####  `` disable_streaming `class-attribute` `instance-attribute` ¶
    
    
    disable_streaming: [bool](https://docs.python.org/3/library/functions.html#bool) | [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['tool_calling'] = False
    

Whether to disable streaming for this model.

If streaming is bypassed, then `stream`/`astream`/`astream_events` will defer to `invoke`/`ainvoke`.

  * If `True`, will always bypass streaming case.
  * If `'tool_calling'`, will bypass streaming case only when the model is called with a `tools` keyword argument. In other words, LangChain will automatically switch to non-streaming behavior (`invoke`) only when the tools argument is provided. This offers the best of both worlds.
  * If `False` (Default), will always use streaming case if available.



The main reason for this flag is that code might be written using `stream` and a user may want to swap out a given model for another model whose the implementation does not properly support streaming.

####  `` output_version `class-attribute` `instance-attribute` ¶
    
    
    output_version: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=from_env("LC_OUTPUT_VERSION", default=None)
    )
    

Version of `AIMessage` output format to store in message content.

`AIMessage.content_blocks` will lazily parse the contents of `content` into a standard format. This flag can be used to additionally store the standard format in message content, e.g., for serialization purposes.

Supported values:

  * `'v0'`: provider-specific format in content (can lazily-parse with `content_blocks`)
  * `'v1'`: standardized format in content (consistent with `content_blocks`)



Partner packages (e.g., [`langchain-openai`](https://pypi.org/project/langchain-openai)) can also use this field to roll out new content formats in a backward-compatible way.

Added in `langchain-core` 1.0

####  `` profile `property` ¶
    
    
    profile: [ModelProfile](../../langchain_model_profiles/#langchain_model_profiles.ModelProfile "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ModelProfile</span> \(<code>langchain_model_profiles.ModelProfile</code>\)")
    

Return profiling information for the model.

This property relies on the `langchain-model-profiles` package to retrieve chat model capabilities, such as context window sizes and supported features.

RAISES | DESCRIPTION  
---|---  
`[ImportError](https://docs.python.org/3/library/exceptions.html#ImportError)` |  If `langchain-model-profiles` is not installed.  
RETURNS | DESCRIPTION  
---|---  
`[ModelProfile](../../langchain_model_profiles/#langchain_model_profiles.ModelProfile "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ModelProfile</span> \(<code>langchain_model_profiles.ModelProfile</code>\)")` |  A `ModelProfile` object containing profiling information for the model.  
  
####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock runtime client for making data plane API calls

####  `` bedrock_client `class-attribute` `instance-attribute` ¶
    
    
    bedrock_client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock client for making control plane API calls

####  `` model_id `class-attribute` `instance-attribute` ¶
    
    
    model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(alias='model')
    

ID of the model to call.

e.g., `"anthropic.claude-3-sonnet-20240229-v1:0"`. This is equivalent to the modelID property in the list-foundation-models api. For custom and provisioned models, an ARN value is expected. See <https://docs.aws.amazon.com/bedrock/latest/userguide/model-ids.html#model-ids-arns> for a list of all supported built-in models.

####  `` base_model_id `class-attribute` `instance-attribute` ¶
    
    
    base_model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='base_model')
    

An optional field to pass the base model id. If provided, this will be used over the value of model_id to identify the base model.

####  `` system `class-attribute` `instance-attribute` ¶
    
    
    system: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str) | [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None
    

Optional list of system prompts for the LLM.

Each entry can be either

  * a simple string (for straightforward text-based system prompts), or
  * a dictionary matching the Converse API system message schema, allowing inclusion of additional fields like `guardContent`, `cachePoint`, etc.

Example

system = [ "a simple system prompt", { "text": "another system prompt", "guardContent": {"text": {"text": "string"}}, "cachePoint": {"type": "default"} }, ]

String inputs will be internally converted to the appropriate message format, while dict entries will be passed through as-is. Any invalid formats will be rejected by the Converse API.

####  `` max_tokens `class-attribute` `instance-attribute` ¶
    
    
    max_tokens: [int](https://docs.python.org/3/library/functions.html#int) | None = None
    

Max tokens to generate.

####  `` stop_sequences `class-attribute` `instance-attribute` ¶
    
    
    stop_sequences: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='stop')
    

Stop generation if any of these substrings occurs.

####  `` temperature `class-attribute` `instance-attribute` ¶
    
    
    temperature: [float](https://docs.python.org/3/library/functions.html#float) | None = None
    

Sampling temperature. Must be 0 to 1.

####  `` top_p `class-attribute` `instance-attribute` ¶
    
    
    top_p: [float](https://docs.python.org/3/library/functions.html#float) | None = None
    

The percentage of most-likely candidates that are considered for the next token.

Must be 0 to 1.

For example, if you choose a value of 0.8 for topP, the model selects from the top 80% of the probability distribution of tokens that could be next in the sequence.

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The aws region, e.g., `us-west-2`.

Falls back to AWS_REGION or AWS_DEFAULT_REGION env variable or region specified in ~/.aws/config in case it is not provided here.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The name of the profile in the ~/.aws/credentials or ~/.aws/config files.

Profile should either have access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id.

If provided, aws_secret_access_key must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from 'AWS_ACCESS_KEY_ID' environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS secret_access_key.

If provided, aws_access_key_id must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from 'AWS_SECRET_ACCESS_KEY' environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token.

If provided, aws_access_key_id and aws_secret_access_key must also be provided. Not required unless using temporary credentials. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from 'AWS_SESSION_TOKEN' environment variable.

####  `` provider `class-attribute` `instance-attribute` ¶
    
    
    provider: [str](https://docs.python.org/3/library/stdtypes.html#str) = ''
    

The model provider, e.g., amazon, cohere, ai21, etc.

When not supplied, provider is extracted from the first part of the model_id, e.g. 'amazon' in 'amazon.titan-text-express-v1'. This value should be provided for model IDs that do not have the provider in them, like custom and provisioned models that have an ARN associated with them.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='base_url')
    

Needed if you don't want to default to us-east-1 endpoint

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional botocore.config.Config instance to pass to the client.

####  `` guardrail_config `class-attribute` `instance-attribute` ¶
    
    
    guardrail_config: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='guardrails')
    

Configuration information for a guardrail that you want to use in the request.

####  `` additional_model_request_fields `class-attribute` `instance-attribute` ¶
    
    
    additional_model_request_fields: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Additional inference parameters that the model supports.

Parameters beyond the base set of inference parameters that Converse supports in the inferenceConfig field.

####  `` additional_model_response_field_paths `class-attribute` `instance-attribute` ¶
    
    
    additional_model_response_field_paths: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None
    

Additional model parameters field paths to return in the response.

Converse returns the requested fields as a JSON Pointer object in the additionalModelResponseFields field. The following is example JSON for additionalModelResponseFieldPaths.

####  `` supports_tool_choice_values `class-attribute` `instance-attribute` ¶
    
    
    supports_tool_choice_values: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['auto', 'any', 'tool']] | None = None
    

Which types of tool_choice values the model supports.

Inferred if not specified. Inferred as ('auto', 'any', 'tool') if a 'claude-3' model is used, ('auto', 'any') if a 'mistral-large' model is used, ('auto') if a 'nova' model is used, empty otherwise.

####  `` request_metadata `class-attribute` `instance-attribute` ¶
    
    
    request_metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None
    

Key-Value pairs that you can use to filter invocation logs.

####  `` guard_last_turn_only `class-attribute` `instance-attribute` ¶
    
    
    guard_last_turn_only: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Boolean flag for applying the guardrail to only the last turn.

####  `` raw_blocks `class-attribute` `instance-attribute` ¶
    
    
    raw_blocks: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None
    

Raw Bedrock message blocks that can be passed in.

LangChain will relay them unchanged, enabling any combination of content block types. This is useful for custom guardrail wrapping.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[AIMessageChunk](../../langchain/messages/#langchain.messages.AIMessageChunk "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessageChunk</span> \(<code>langchain_core.messages.AIMessageChunk</code>\)")]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[AIMessageChunk](../../langchain/messages/#langchain.messages.AIMessageChunk "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessageChunk</span> \(<code>langchain_core.messages.AIMessageChunk</code>\)")]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

####  `` set_verbose ¶
    
    
    set_verbose(verbose: [bool](https://docs.python.org/3/library/functions.html#bool) | None) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

If verbose is `None`, set it.

This allows users to pass in `None` as verbose to access the global setting.

PARAMETER | DESCRIPTION  
---|---  
`verbose` |  The verbosity setting to use. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool) | None`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  The verbosity setting to use.  
  
####  `` generate_prompt ¶
    
    
    generate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` agenerate_prompt `async` ¶
    
    
    agenerate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` get_token_ids ¶
    
    
    get_token_ids(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]
    

Return the ordered IDs of the tokens in a text.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]` |  A list of IDs corresponding to the tokens in the text, in order they occur in the text.  
  
####  `` get_num_tokens ¶
    
    
    get_num_tokens(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens present in the text.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The integer number of tokens in the text.  
  
####  `` generate ¶
    
    
    generate(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`messages` |  List of list of messages. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`tags` |  The tags to apply. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`metadata` |  The metadata to apply. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None` **DEFAULT:** `None`  
`run_name` |  The name of the run. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`run_id` |  The ID of the run. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` agenerate `async` ¶
    
    
    agenerate(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`messages` |  List of list of messages. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`tags` |  The tags to apply. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`metadata` |  The metadata to apply. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None` **DEFAULT:** `None`  
`run_name` |  The name of the run. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`run_id` |  The ID of the run. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` dict ¶
    
    
    dict(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> dict
    

Return a dictionary of the LLM.

####  `` create_cache_point `classmethod` ¶
    
    
    create_cache_point(cache_type: [str](https://docs.python.org/3/library/stdtypes.html#str) = 'default') -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Create a prompt caching configuration for Bedrock. Args: cache_type: Type of cache point. Default is "default". Returns: Dictionary containing prompt caching configuration.

####  `` build_extra `classmethod` ¶
    
    
    build_extra(values: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]) -> [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Build extra kwargs from additional params that were passed in.

####  `` validate_environment ¶
    
    
    validate_environment() -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Validate that AWS credentials to and python package exists in environment.

####  `` bind_tools ¶
    
    
    bind_tools(
        tools: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | TypeBaseModel | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>") | [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")],
        *,
        tool_choice: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [str](https://docs.python.org/3/library/stdtypes.html#str) | [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["auto", "any"] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")]
    

Bind tools to the model.

PARAMETER | DESCRIPTION  
---|---  
`tools` |  Sequence of tools to bind to the model. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "<code>typing.Dict</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [type](https://docs.python.org/3/library/functions.html#type) | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>") | [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")]`  
`tool_choice` |  The tool to use. If "any" then any tool can be used. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"), [AIMessage](../../langchain/messages/#langchain.messages.AIMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AIMessage</span> \(<code>langchain_core.messages.AIMessage</code>\)")]` |  A Runnable that returns a message.  
  
####  `` with_structured_output ¶
    
    
    with_structured_output(
        schema: _DictOrPydanticClass, *, include_raw: [bool](https://docs.python.org/3/library/functions.html#bool) = False, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Model wrapper that returns outputs formatted to match the given schema.

PARAMETER | DESCRIPTION  
---|---  
`schema` |  The output schema. Can be passed in as:

  * An OpenAI function/tool schema,
  * A JSON Schema,
  * A `TypedDict` class,
  * Or a Pydantic class.

If `schema` is a Pydantic class then the model output will be a Pydantic instance of that class, and the model-generated fields will be validated by the Pydantic class. Otherwise the model output will be a dict and will not be validated. See `langchain_core.utils.function_calling.convert_to_openai_tool` for more on how to properly specify types and descriptions of schema fields when specifying a Pydantic or `TypedDict` class. **TYPE:** `[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "<code>typing.Dict</code>") | [type](https://docs.python.org/3/library/functions.html#type)`  
`include_raw` |  If `False` then only the parsed structured output is returned. If an error occurs during model output parsing it will be raised. If `True` then both the raw model response (a `BaseMessage`) and the parsed model response will be returned. If an error occurs during output parsing it will be caught and returned as well. The final output is always a `dict` with keys `'raw'`, `'parsed'`, and `'parsing_error'`. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If there are any unsupported `kwargs`.  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the model does not implement `with_structured_output()`.  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"), [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "<code>typing.Dict</code>") | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A `Runnable` that takes same inputs as a `langchain_core.language_models.chat.BaseChatModel`. If `include_raw` is `False` and `schema` is a Pydantic class, `Runnable` outputs an instance of `schema` (i.e., a Pydantic object). Otherwise, if `include_raw` is `False` then `Runnable` outputs a `dict`. If `include_raw` is `True`, then `Runnable` outputs a `dict` with keys:

  * `'raw'`: `BaseMessage`
  * `'parsed'`: `None` if there was a parsing error, otherwise the type depends on the `schema` as described above.
  * `'parsing_error'`: `BaseException | None`

  
  
Example: Pydantic schema (`include_raw=False`):
    
    
    from pydantic import BaseModel
    
    
    class AnswerWithJustification(BaseModel):
        '''An answer to the user question along with justification for the answer.'''
    
        answer: str
        justification: str
    
    
    model = ChatModel(model="model-name", temperature=0)
    structured_model = model.with_structured_output(AnswerWithJustification)
    
    structured_model.invoke(
        "What weighs more a pound of bricks or a pound of feathers"
    )
    
    # -> AnswerWithJustification(
    #     answer='They weigh the same',
    #     justification='Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ.'
    # )
    

Example: Pydantic schema (`include_raw=True`):
    
    
    from pydantic import BaseModel
    
    
    class AnswerWithJustification(BaseModel):
        '''An answer to the user question along with justification for the answer.'''
    
        answer: str
        justification: str
    
    
    model = ChatModel(model="model-name", temperature=0)
    structured_model = model.with_structured_output(
        AnswerWithJustification, include_raw=True
    )
    
    structured_model.invoke(
        "What weighs more a pound of bricks or a pound of feathers"
    )
    # -> {
    #     'raw': AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_Ao02pnFYXD6GN1yzc0uXPsvF', 'function': {'arguments': '{"answer":"They weigh the same.","justification":"Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ."}', 'name': 'AnswerWithJustification'}, 'type': 'function'}]}),
    #     'parsed': AnswerWithJustification(answer='They weigh the same.', justification='Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume or density of the objects may differ.'),
    #     'parsing_error': None
    # }
    

Example: `dict` schema (`include_raw=False`):
    
    
    from pydantic import BaseModel
    from langchain_core.utils.function_calling import convert_to_openai_tool
    
    
    class AnswerWithJustification(BaseModel):
        '''An answer to the user question along with justification for the answer.'''
    
        answer: str
        justification: str
    
    
    dict_schema = convert_to_openai_tool(AnswerWithJustification)
    model = ChatModel(model="model-name", temperature=0)
    structured_model = model.with_structured_output(dict_schema)
    
    structured_model.invoke(
        "What weighs more a pound of bricks or a pound of feathers"
    )
    # -> {
    #     'answer': 'They weigh the same',
    #     'justification': 'Both a pound of bricks and a pound of feathers weigh one pound. The weight is the same, but the volume and density of the two substances differ.'
    # }
    

Behavior changed in `langchain-core` 0.2.26

Added support for `TypedDict` class.

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Is this class serializable?

By design, even if a class inherits from `Serializable`, it is not serializable by default. This is to prevent accidental serialization of objects that should not be serialized.

RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  Whether the class is serializable. Default is `False`.  
  
####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the LangChain object.

For example, if the class is `langchain.llms.openai.OpenAI`, then the namespace is `["langchain", "llms", "openai"]`

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  The namespace.  
  
####  `` get_num_tokens_from_messages ¶
    
    
    get_num_tokens_from_messages(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")], tools: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>") | None = None
    ) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens in the messages using AWS Bedrock count_tokens API.

This method uses AWS Bedrock's count_tokens API which provides accurate token counting for supported models before inference. Falls back to the base implementation for unsupported models.

PARAMETER | DESCRIPTION  
---|---  
`messages` |  The message inputs to tokenize. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]`  
`tools` |  Tool schemas (ignored, unsupported by count_tokens API). **TYPE:** `[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The number of input tokens in the messages.  
  
###  `` BedrockRerank ¶

Bases: `BaseDocumentCompressor`

Document compressor that uses AWS Bedrock Rerank API.

METHOD | DESCRIPTION  
---|---  
`acompress_documents` |  Async compress retrieved documents given the query context.  
`initialize_client` |  Initialize the AWS Bedrock client.  
`rerank` |  Returns an ordered list of documents based on their relevance to the query.  
`compress_documents` |  Compress documents using Bedrock's rerank API.  
  
####  `` model_arn `instance-attribute` ¶
    
    
    model_arn: [str](https://docs.python.org/3/library/stdtypes.html#str)
    

The ARN of the reranker model.

####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Bedrock client to use for compressing documents.

####  `` top_n `class-attribute` `instance-attribute` ¶
    
    
    top_n: [int](https://docs.python.org/3/library/functions.html#int) | None = 3
    

Number of documents to return.

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The aws region, e.g., `us-west-2`.

Falls back to `AWS_REGION` or `AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config` in case it is not provided here.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=from_env("AWS_PROFILE", default=None)
    )
    

AWS profile for authentication, optional.

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id.

If provided, `aws_secret_access_key` must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS secret_access_key.

If provided, aws_access_key_id must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token.

If provided, aws_access_key_id and aws_secret_access_key must also be provided. Not required unless using temporary credentials.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SESSION_TOKEN` environment variable.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='base_url')
    

Needed if you don't want to default to us-east-1 endpoint

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional botocore.config.Config instance to pass to the client.

####  `` acompress_documents `async` ¶
    
    
    acompress_documents(
        documents: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], query: [str](https://docs.python.org/3/library/stdtypes.html#str), callbacks: Callbacks | None = None
    ) -> [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async compress retrieved documents given the query context.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  The retrieved `Document` objects. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`query` |  The query context. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`callbacks` |  Optional `Callbacks` to run during compression. **TYPE:** `Callbacks | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  The compressed documents.  
  
####  `` initialize_client `classmethod` ¶
    
    
    initialize_client(values: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]) -> [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Initialize the AWS Bedrock client.

####  `` rerank ¶
    
    
    rerank(
        documents: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str) | [Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)") | [dict](https://docs.python.org/3/library/stdtypes.html#dict)],
        query: [str](https://docs.python.org/3/library/stdtypes.html#str),
        top_n: [int](https://docs.python.org/3/library/functions.html#int) | None = None,
        additional_model_request_fields: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
    

Returns an ordered list of documents based on their relevance to the query.

PARAMETER | DESCRIPTION  
---|---  
`query` |  The query to use for reranking. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`documents` |  A sequence of documents to rerank. **TYPE:** `[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str) | [Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)") | [dict](https://docs.python.org/3/library/stdtypes.html#dict)]`  
`top_n` |  The number of top-ranked results to return. Defaults to self.top_n. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int) | None` **DEFAULT:** `None`  
`additional_model_request_fields` |  Additional fields to pass to the model. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` |  A list of ranked documents with relevance scores.  
  
####  `` compress_documents ¶
    
    
    compress_documents(
        documents: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], query: [str](https://docs.python.org/3/library/stdtypes.html#str), callbacks: Callbacks | None = None
    ) -> [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Compress documents using Bedrock's rerank API.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  A sequence of documents to compress. **TYPE:** `[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`query` |  The query to use for compressing the documents. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`callbacks` |  Callbacks to run during the compression process. **TYPE:** `Callbacks | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  A sequence of compressed documents.  
  
###  `` BedrockEmbeddings ¶

Bases: `[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")`, `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`

Bedrock embedding models.

To authenticate, the AWS client uses the following methods to automatically load credentials: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If a specific credential profile should be used, you must pass the name of the profile from the ~/.aws/credentials file that is to be used.

Make sure the credentials / roles used have the required policies to access the Bedrock service.

METHOD | DESCRIPTION  
---|---  
`validate_environment` |  Validate that AWS credentials to and python package exists in environment.  
`embed_documents` |  Compute doc embeddings using a Bedrock model.  
`embed_query` |  Compute query embeddings using a Bedrock model.  
`aembed_query` |  Asynchronous compute query embeddings using a Bedrock model.  
`aembed_documents` |  Asynchronous compute doc embeddings using a Bedrock model.  
  
####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Bedrock client.

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The aws region e.g., `us-west-2`.

Falls back to `AWS_REGION`/`AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config` in case it is not provided here.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the profile in the `~/.aws/credentials` or `~/.aws/config` files, which has either access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id.

If provided, aws_secret_access_key must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS secret_access_key.

If provided, aws_access_key_id must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token.

If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided.

Not required unless using temporary credentials.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SESSION_TOKEN` environment variable.

####  `` model_id `class-attribute` `instance-attribute` ¶
    
    
    model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) = 'amazon.titan-embed-text-v1'
    

Id of the model to call, e.g., `'amazon.titan-embed-text-v1'`, this is equivalent to the `modelId` property in the list-foundation-models api

####  `` model_kwargs `class-attribute` `instance-attribute` ¶
    
    
    model_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None
    

Keyword arguments to pass to the model.

####  `` provider `class-attribute` `instance-attribute` ¶
    
    
    provider: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Name of the provider, e.g., amazon, cohere, etc.. If not specified, the provider will be inferred from the `model_id`.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Needed if you don't want to default to `'us-east-1'` endpoint

####  `` normalize `class-attribute` `instance-attribute` ¶
    
    
    normalize: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Whether the embeddings should be normalized to unit vectors

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional `botocore.config.Config` instance to pass to the client.

####  `` validate_environment ¶
    
    
    validate_environment() -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Validate that AWS credentials to and python package exists in environment.

####  `` embed_documents ¶
    
    
    embed_documents(texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]]
    

Compute doc embeddings using a Bedrock model.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  The list of texts to embed **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]]` |  List of embeddings, one for each text.  
  
####  `` embed_query ¶
    
    
    embed_query(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]
    

Compute query embeddings using a Bedrock model.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The text to embed. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]` |  Embeddings for the text.  
  
####  `` aembed_query `async` ¶
    
    
    aembed_query(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]
    

Asynchronous compute query embeddings using a Bedrock model.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The text to embed. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]` |  Embeddings for the text.  
  
####  `` aembed_documents `async` ¶
    
    
    aembed_documents(texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]]
    

Asynchronous compute doc embeddings using a Bedrock model.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  The list of texts to embed **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]]` |  List of embeddings, one for each text.  
  
###  `` NeptuneAnalyticsGraph ¶

Bases: `BaseNeptuneGraph`

Neptune Analytics wrapper for graph operations.

PARAMETER | DESCRIPTION  
---|---  
`client` |  optional boto3 Neptune client **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`credentials_profile_name` |  optional AWS profile name **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`region_name` |  optional AWS region, e.g., us-west-2 **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`graph_identifier` |  the graph identifier for a Neptune Analytics graph **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
Example
    
    
    graph = NeptuneAnalyticsGraph(
        graph_identifier='<my-graph-id>'
    )
    

_Security note_ : Make sure that the database connection uses credentials that are narrowly-scoped to only include necessary permissions. Failure to do so may result in data corruption or loss, since the calling code may attempt commands that would result in deletion, mutation of data if appropriately prompted or reading sensitive data if such data is present in the database. The best way to guard against such negative outcomes is to (as appropriate) limit the permissions granted to the credentials used with this tool.
    
    
    See https://docs.langchain.com/oss/python/security-policy for more information.
    

METHOD | DESCRIPTION  
---|---  
`__init__` |  Create a new Neptune Analytics graph wrapper instance.  
`query` |  Query Neptune database.  
  
####  `` get_schema `property` ¶
    
    
    get_schema: [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Returns the schema of the Neptune database

####  `` __init__ ¶
    
    
    __init__(
        graph_identifier: [str](https://docs.python.org/3/library/stdtypes.html#str),
        client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        config: Config | None = None,
        property_descriptions: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)], [str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
    ) -> None
    

Create a new Neptune Analytics graph wrapper instance.

####  `` query ¶
    
    
    query(query: [str](https://docs.python.org/3/library/stdtypes.html#str), params: [dict](https://docs.python.org/3/library/stdtypes.html#dict) = {}) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
    

Query Neptune database.

###  `` NeptuneGraph ¶

Bases: `BaseNeptuneGraph`

Neptune wrapper for graph operations.

PARAMETER | DESCRIPTION  
---|---  
`host` |  endpoint for the database instance **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`port` |  port number for the database instance, default is 8182 **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `8182`  
`use_https` |  whether to use secure connection, default is True **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`client` |  optional boto3 Neptune client **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`credentials_profile_name` |  optional AWS profile name **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`region_name` |  optional AWS region, e.g., us-west-2 **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`sign` |  whether to sign the request payload, default is True **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`aws_access_key_id` |  optional AWS access key ID **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None` **DEFAULT:** `None`  
`aws_secret_access_key` |  optional AWS secret access key **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None` **DEFAULT:** `None`  
`aws_session_token` |  optional AWS session token **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None` **DEFAULT:** `None`  
`endpoint_url` |  optional custom endpoint URL **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`config` |  optional botocore Config object **TYPE:** `Config | None` **DEFAULT:** `None`  
Example
    
    
    graph = NeptuneGraph(
        host='<my-cluster>',
        port=8182
    )
    

_Security note_ : Make sure that the database connection uses credentials that are narrowly-scoped to only include necessary permissions. Failure to do so may result in data corruption or loss, since the calling code may attempt commands that would result in deletion, mutation of data if appropriately prompted or reading sensitive data if such data is present in the database. The best way to guard against such negative outcomes is to (as appropriate) limit the permissions granted to the credentials used with this tool.
    
    
    See https://docs.langchain.com/oss/python/security-policy for more information.
    

METHOD | DESCRIPTION  
---|---  
`__init__` |  Create a new Neptune graph wrapper instance.  
`query` |  Query Neptune database.  
  
####  `` get_schema `property` ¶
    
    
    get_schema: [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Returns the schema of the Neptune database

####  `` __init__ ¶
    
    
    __init__(
        host: [str](https://docs.python.org/3/library/stdtypes.html#str),
        port: [int](https://docs.python.org/3/library/functions.html#int) = 8182,
        use_https: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        sign: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = None,
        endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        config: Config | None = None,
        property_descriptions: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)], [str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
    ) -> None
    

Create a new Neptune graph wrapper instance.

####  `` query ¶
    
    
    query(query: [str](https://docs.python.org/3/library/stdtypes.html#str), params: [dict](https://docs.python.org/3/library/stdtypes.html#dict) = {}) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
    

Query Neptune database.

###  `` BedrockLLM ¶

Bases: `LLM`, `BedrockBase`

Bedrock models.

To authenticate, the AWS client uses the following methods to automatically load credentials: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If a specific credential profile should be used, you must pass the name of the profile from the `~/.aws/credentials` file that is to be used.

Make sure the credentials / roles used have the required policies to access the Bedrock service.

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Transform a single input into an output.  
`ainvoke` |  Transform a single input into an output.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
`set_verbose` |  If verbose is `None`, set it.  
`generate_prompt` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate_prompt` |  Asynchronously pass a sequence of prompts and return model generations.  
`with_structured_output` |  Not implemented on this class.  
`get_num_tokens_from_messages` |  Get the number of tokens in the messages.  
`validate_environment` |  Validate that AWS credentials to and python package exists in environment.  
`generate` |  Pass a sequence of prompts to a model and return generations.  
`agenerate` |  Asynchronously pass a sequence of prompts to a model and return generations.  
`__str__` |  Return a string representation of the object for printing.  
`dict` |  Return a dictionary of the LLM.  
`save` |  Save the LLM.  
`is_lc_serializable` |  Return whether this model can be serialized by Langchain.  
`get_lc_namespace` |  Get the namespace of the langchain object.  
`get_num_tokens` |  Get the number of tokens present in the text.  
`get_token_ids` |  Return the ordered IDs of the tokens in a text.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [TypeAlias](https://docs.python.org/3/library/typing.html#typing.TypeAlias "<code>typing.TypeAlias</code>")
    

Get the input type for this `Runnable`.

####  `` OutputType `property` ¶
    
    
    OutputType: [type](https://docs.python.org/3/library/functions.html#type)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the input type for this `Runnable`.

####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` cache `class-attribute` `instance-attribute` ¶
    
    
    cache: [BaseCache](../../langchain_core/caches/#langchain_core.caches.BaseCache "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseCache</span> \(<code>langchain_core.caches.BaseCache</code>\)") | [bool](https://docs.python.org/3/library/functions.html#bool) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Whether to cache the response.

  * If `True`, will use the global cache.
  * If `False`, will not use a cache
  * If `None`, will use the global cache if it's set, otherwise no cache.
  * If instance of `BaseCache`, will use the provided cache.



Caching is not currently supported for streaming methods of models.

####  `` verbose `class-attribute` `instance-attribute` ¶
    
    
    verbose: [bool](https://docs.python.org/3/library/functions.html#bool) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default_factory=_get_verbosity, exclude=True, repr=False)
    

Whether to print out response text.

####  `` callbacks `class-attribute` `instance-attribute` ¶
    
    
    callbacks: Callbacks = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Callbacks to add to the run trace.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Tags to add to the run trace.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Metadata to add to the run trace.

####  `` custom_get_token_ids `class-attribute` `instance-attribute` ¶
    
    
    custom_get_token_ids: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[str](https://docs.python.org/3/library/stdtypes.html#str)], [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default=None, exclude=True
    )
    

Optional encoder to use for counting tokens.

####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock runtime client for making data plane API calls

####  `` bedrock_client `class-attribute` `instance-attribute` ¶
    
    
    bedrock_client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The bedrock client for making control plane API calls

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='region')
    

The aws region e.g., `us-west-2`. Falls back to `AWS_REGION` or `AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config` in case it is not provided here.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

The name of the profile in the `~/.aws/credentials` or `~/.aws/config files`, which has either access keys or role information specified.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id.

If provided, `aws_secret_access_key` must also be provided.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS `secret_access_key`.

If provided, `aws_access_key_id` must also be provided.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token.

If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided.

Not required unless using temporary credentials.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SESSION_TOKEN` environment variable.

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional `botocore.config.Config` instance to pass to the client.

####  `` provider `class-attribute` `instance-attribute` ¶
    
    
    provider: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The model provider, e.g., `'amazon'`, `'cohere'`, `'ai21'`, etc. When not supplied, provider is extracted from the first part of the model_id e.g. `'amazon'` in `'amazon.titan-text-express-v1'`. This value should be provided for model IDs that do not have the provider in them, e.g., custom and provisioned models that have an ARN associated with them.

####  `` model_id `class-attribute` `instance-attribute` ¶
    
    
    model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(alias='model')
    

Id of the model to call, e.g., `'amazon.titan-text-express-v1'`, this is equivalent to the `modelId` property in the list-foundation-models api. For custom and provisioned models, an ARN value is expected.

####  `` base_model_id `class-attribute` `instance-attribute` ¶
    
    
    base_model_id: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, alias='base_model')
    

An optional field to pass the base model id. If provided, this will be used over the value of `model_id` to identify the base model.

####  `` model_kwargs `class-attribute` `instance-attribute` ¶
    
    
    model_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Keyword arguments to pass to the model.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Needed if you don't want to default to `'us-east-1'` endpoint

####  `` streaming `class-attribute` `instance-attribute` ¶
    
    
    streaming: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Whether to stream the results.

####  `` guardrails `class-attribute` `instance-attribute` ¶
    
    
    guardrails: [Mapping](https://docs.python.org/3/library/typing.html#typing.Mapping "<code>typing.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = {
        "trace": None,
        "guardrailIdentifier": None,
        "guardrailVersion": None,
    }
    

An optional dictionary to configure guardrails for Bedrock.

This field `guardrails` consists of two keys: `'guardrailId'` and `'guardrailVersion'`, which should be strings, but are initialized to None.

It's used to determine if specific guardrails are enabled and properly set.

Type

Optional[Mapping[str, str]]: A mapping with 'guardrailId' and 'guardrailVersion' keys.

Example
    
    
    llm = BedrockLLM(model_id="<model_id>", client=<bedrock_client>,
        model_kwargs={},
        guardrails={
                "guardrailId": "<guardrail_id>",
                "guardrailVersion": "<guardrail_version>"})
    

To enable tracing for guardrails, set the 'trace' key to True and pass a callback handler to the 'run_manager' parameter of the 'generate', '_call' methods.

Example
    
    
    llm = BedrockLLM(model_id="<model_id>", client=<bedrock_client>,
        model_kwargs={},
        guardrails={
                "guardrailId": "<guardrail_id>",
                "guardrailVersion": "<guardrail_version>",
                "trace": True},
        callbacks=[BedrockAsyncCallbackHandler()])
    

<https://python.langchain.com/docs/concepts/callbacks/> for more information on callback handlers.

class BedrockAsyncCallbackHandler(AsyncCallbackHandler): async def on_llm_error( self, error: BaseException, **kwargs: Any, ) -> Any: reason = kwargs.get("reason") if reason == "GUARDRAIL_INTERVENED": ...Logic to handle guardrail intervention...

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)")],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)")],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

####  `` set_verbose ¶
    
    
    set_verbose(verbose: [bool](https://docs.python.org/3/library/functions.html#bool) | None) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

If verbose is `None`, set it.

This allows users to pass in `None` as verbose to access the global setting.

PARAMETER | DESCRIPTION  
---|---  
`verbose` |  The verbosity setting to use. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool) | None`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  The verbosity setting to use.  
  
####  `` generate_prompt ¶
    
    
    generate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` agenerate_prompt `async` ¶
    
    
    agenerate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` with_structured_output ¶
    
    
    with_structured_output(
        schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [type](https://docs.python.org/3/library/functions.html#type), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Not implemented on this class.

####  `` get_num_tokens_from_messages ¶
    
    
    get_num_tokens_from_messages(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")], tools: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>") | None = None
    ) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens in the messages.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

Note

  * The base implementation of `get_num_tokens_from_messages` ignores tool schemas.
  * The base implementation of `get_num_tokens_from_messages` adds additional prefixes to messages in represent user roles, which will add to the overall token count. Model-specific implementations may choose to handle this differently.



PARAMETER | DESCRIPTION  
---|---  
`messages` |  The message inputs to tokenize. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]`  
`tools` |  If provided, sequence of dict, `BaseModel`, function, or `BaseTool` objects to be converted to tool schemas. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The sum of the number of tokens across the messages.  
  
####  `` validate_environment ¶
    
    
    validate_environment() -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Validate that AWS credentials to and python package exists in environment.

####  `` generate ¶
    
    
    generate(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of string prompts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None` **DEFAULT:** `None`  
`tags` |  List of tags to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None` **DEFAULT:** `None`  
`metadata` |  List of metadata dictionaries to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None` **DEFAULT:** `None`  
`run_name` |  List of run names to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`run_id` |  List of run IDs to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If prompts is not a list.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the length of `callbacks`, `tags`, `metadata`, or `run_name` (if provided) does not match the length of prompts.  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` agenerate `async` ¶
    
    
    agenerate(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of string prompts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None` **DEFAULT:** `None`  
`tags` |  List of tags to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None` **DEFAULT:** `None`  
`metadata` |  List of metadata dictionaries to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None` **DEFAULT:** `None`  
`run_name` |  List of run names to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`run_id` |  List of run IDs to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the length of `callbacks`, `tags`, `metadata`, or `run_name` (if provided) does not match the length of prompts.  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` __str__ ¶
    
    
    __str__() -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Return a string representation of the object for printing.

####  `` dict ¶
    
    
    dict(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> dict
    

Return a dictionary of the LLM.

####  `` save ¶
    
    
    save(file_path: [Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path "<code>pathlib.Path</code>") | [str](https://docs.python.org/3/library/stdtypes.html#str)) -> None
    

Save the LLM.

PARAMETER | DESCRIPTION  
---|---  
`file_path` |  Path to file to save the LLM to. **TYPE:** `[Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path "<code>pathlib.Path</code>") | [str](https://docs.python.org/3/library/stdtypes.html#str)`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the file path is not a string or Path object.  
Example
    
    
    llm.save(file_path="path/llm.yaml")
    

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Return whether this model can be serialized by Langchain.

####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the langchain object.

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  `["langchain", "llms", "bedrock"]`  
  
####  `` get_num_tokens ¶
    
    
    get_num_tokens(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens present in the text.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The integer number of tokens in the text.  
  
####  `` get_token_ids ¶
    
    
    get_token_ids(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]
    

Return the ordered IDs of the tokens in a text.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]` |  A list of IDs corresponding to the tokens in the text, in order they occur in the text.  
  
###  `` SagemakerEndpoint ¶

Bases: `LLM`

Sagemaker Inference Endpoint models.

To use, you must supply the endpoint name from your deployed Sagemaker model & the region where it is deployed.

To authenticate, the AWS client uses the following methods to automatically load credentials: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If a specific credential profile should be used, you must pass the name of the profile from the `~/.aws/credentials` file that is to be used.

Make sure the credentials / roles used have the required policies to access the Sagemaker endpoint.

See: <https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html>

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Transform a single input into an output.  
`ainvoke` |  Transform a single input into an output.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`is_lc_serializable` |  Is this class serializable?  
`get_lc_namespace` |  Get the namespace of the LangChain object.  
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
`set_verbose` |  If verbose is `None`, set it.  
`generate_prompt` |  Pass a sequence of prompts to the model and return model generations.  
`agenerate_prompt` |  Asynchronously pass a sequence of prompts and return model generations.  
`with_structured_output` |  Not implemented on this class.  
`get_token_ids` |  Return the ordered IDs of the tokens in a text.  
`get_num_tokens` |  Get the number of tokens present in the text.  
`get_num_tokens_from_messages` |  Get the number of tokens in the messages.  
`generate` |  Pass a sequence of prompts to a model and return generations.  
`agenerate` |  Asynchronously pass a sequence of prompts to a model and return generations.  
`__str__` |  Return a string representation of the object for printing.  
`dict` |  Return a dictionary of the LLM.  
`save` |  Save the LLM.  
`validate_environment` |  Dont do anything if client provided externally  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [TypeAlias](https://docs.python.org/3/library/typing.html#typing.TypeAlias "<code>typing.TypeAlias</code>")
    

Get the input type for this `Runnable`.

####  `` OutputType `property` ¶
    
    
    OutputType: [type](https://docs.python.org/3/library/functions.html#type)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the input type for this `Runnable`.

####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` cache `class-attribute` `instance-attribute` ¶
    
    
    cache: [BaseCache](../../langchain_core/caches/#langchain_core.caches.BaseCache "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseCache</span> \(<code>langchain_core.caches.BaseCache</code>\)") | [bool](https://docs.python.org/3/library/functions.html#bool) | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Whether to cache the response.

  * If `True`, will use the global cache.
  * If `False`, will not use a cache
  * If `None`, will use the global cache if it's set, otherwise no cache.
  * If instance of `BaseCache`, will use the provided cache.



Caching is not currently supported for streaming methods of models.

####  `` verbose `class-attribute` `instance-attribute` ¶
    
    
    verbose: [bool](https://docs.python.org/3/library/functions.html#bool) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default_factory=_get_verbosity, exclude=True, repr=False)
    

Whether to print out response text.

####  `` callbacks `class-attribute` `instance-attribute` ¶
    
    
    callbacks: Callbacks = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Callbacks to add to the run trace.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Tags to add to the run trace.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default=None, exclude=True)
    

Metadata to add to the run trace.

####  `` custom_get_token_ids `class-attribute` `instance-attribute` ¶
    
    
    custom_get_token_ids: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[str](https://docs.python.org/3/library/stdtypes.html#str)], [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]] | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default=None, exclude=True
    )
    

Optional encoder to use for counting tokens.

####  `` client `class-attribute` `instance-attribute` ¶
    
    
    client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

Boto3 client for sagemaker runtime

####  `` endpoint_name `class-attribute` `instance-attribute` ¶
    
    
    endpoint_name: [str](https://docs.python.org/3/library/stdtypes.html#str) = ''
    

The name of the endpoint from the deployed Sagemaker model.

Must be unique within an AWS Region.

####  `` inference_component_name `class-attribute` `instance-attribute` ¶
    
    
    inference_component_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Optional name of the inference component to invoke if specified with endpoint name.

####  `` region_name `class-attribute` `instance-attribute` ¶
    
    
    region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) = ''
    

The aws region where the Sagemaker model is deployed, eg. `'us-west-2'`.

####  `` credentials_profile_name `class-attribute` `instance-attribute` ¶
    
    
    credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the profile in the `~/.aws/credentials` or `~/.aws/config` files, which has either access keys or role information specified.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

####  `` aws_access_key_id `class-attribute` `instance-attribute` ¶
    
    
    aws_access_key_id: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_ACCESS_KEY_ID", default=None)
    )
    

AWS access key id. 

If provided, aws_secret_access_key must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from 'AWS_ACCESS_KEY_ID' environment variable.

####  `` aws_secret_access_key `class-attribute` `instance-attribute` ¶
    
    
    aws_secret_access_key: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SECRET_ACCESS_KEY", default=None)
    )
    

AWS `secret_access_key`. 

If provided, `aws_access_key_id` must also be provided.

If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable.

####  `` aws_session_token `class-attribute` `instance-attribute` ¶
    
    
    aws_session_token: [SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(
        default_factory=secret_from_env("AWS_SESSION_TOKEN", default=None)
    )
    

AWS session token. 

If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided.

Not required unless using temporary credentials.

See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html>

If not provided, will be read from `AWS_SESSION_TOKEN` environment variable.

####  `` config `class-attribute` `instance-attribute` ¶
    
    
    config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None
    

An optional `botocore.config.Config` instance to pass to the client.

####  `` endpoint_url `class-attribute` `instance-attribute` ¶
    
    
    endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

Needed if you don't want to default to `'us-east-1'` endpoint

####  `` content_handler `instance-attribute` ¶
    
    
    content_handler: LLMContentHandler
    

The content handler class that provides an input and output transform functions to handle formats between LLM and the endpoint.

####  `` streaming `class-attribute` `instance-attribute` ¶
    
    
    streaming: [bool](https://docs.python.org/3/library/functions.html#bool) = False
    

Whether to stream the results.

####  `` model_kwargs `class-attribute` `instance-attribute` ¶
    
    
    model_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None
    

Keyword arguments to pass to the model.

####  `` endpoint_kwargs `class-attribute` `instance-attribute` ¶
    
    
    endpoint_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None
    

Optional attributes passed to the invoke_endpoint function. See `boto3` docs for more info.

[boto3](https://boto3.amazonaws.com/v1/documentation/api/latest/index.html)

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Transform a single input into an output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)")],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)")],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: [LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None,
        *,
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Is this class serializable?

By design, even if a class inherits from `Serializable`, it is not serializable by default. This is to prevent accidental serialization of objects that should not be serialized.

RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  Whether the class is serializable. Default is `False`.  
  
####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the LangChain object.

For example, if the class is `langchain.llms.openai.OpenAI`, then the namespace is `["langchain", "llms", "openai"]`

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  The namespace.  
  
####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

####  `` set_verbose ¶
    
    
    set_verbose(verbose: [bool](https://docs.python.org/3/library/functions.html#bool) | None) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

If verbose is `None`, set it.

This allows users to pass in `None` as verbose to access the global setting.

PARAMETER | DESCRIPTION  
---|---  
`verbose` |  The verbosity setting to use. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool) | None`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  The verbosity setting to use.  
  
####  `` generate_prompt ¶
    
    
    generate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to the model and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` agenerate_prompt `async` ¶
    
    
    agenerate_prompt(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts and return model generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of `PromptValue` objects. A `PromptValue` is an object that can be converted to match the format of any language model (string for pure text generation models and `BaseMessage` objects for chat models). **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[PromptValue]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generation` objects for each input prompt and additional model provider-specific output.  
  
####  `` with_structured_output ¶
    
    
    with_structured_output(
        schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [type](https://docs.python.org/3/library/functions.html#type), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[LanguageModelInput](../../langchain_core/language_models/#langchain_core.language_models.base.LanguageModelInput "<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">LanguageModelInput</span>
    
    
      <span class="doc doc-labels">
          <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
      </span> \(<code>langchain_core.language_models.base.LanguageModelInput</code>\)"), [dict](https://docs.python.org/3/library/stdtypes.html#dict) | [BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Not implemented on this class.

####  `` get_token_ids ¶
    
    
    get_token_ids(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]
    

Return the ordered IDs of the tokens in a text.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[int](https://docs.python.org/3/library/functions.html#int)]` |  A list of IDs corresponding to the tokens in the text, in order they occur in the text.  
  
####  `` get_num_tokens ¶
    
    
    get_num_tokens(text: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens present in the text.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

PARAMETER | DESCRIPTION  
---|---  
`text` |  The string input to tokenize. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The integer number of tokens in the text.  
  
####  `` get_num_tokens_from_messages ¶
    
    
    get_num_tokens_from_messages(
        messages: [list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")], tools: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>") | None = None
    ) -> [int](https://docs.python.org/3/library/functions.html#int)
    

Get the number of tokens in the messages.

Useful for checking if an input fits in a model's context window.

This should be overridden by model-specific implementations to provide accurate token counts via model-specific tokenizers.

Note

  * The base implementation of `get_num_tokens_from_messages` ignores tool schemas.
  * The base implementation of `get_num_tokens_from_messages` adds additional prefixes to messages in represent user roles, which will add to the overall token count. Model-specific implementations may choose to handle this differently.



PARAMETER | DESCRIPTION  
---|---  
`messages` |  The message inputs to tokenize. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[BaseMessage](../../langchain_core/language_models/#langchain_core.messages.BaseMessage "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseMessage</span> \(<code>langchain_core.messages.BaseMessage</code>\)")]`  
`tools` |  If provided, sequence of dict, `BaseModel`, function, or `BaseTool` objects to be converted to tool schemas. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[int](https://docs.python.org/3/library/functions.html#int)` |  The sum of the number of tokens across the messages.  
  
####  `` generate ¶
    
    
    generate(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of string prompts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None` **DEFAULT:** `None`  
`tags` |  List of tags to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None` **DEFAULT:** `None`  
`metadata` |  List of metadata dictionaries to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None` **DEFAULT:** `None`  
`run_name` |  List of run names to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`run_id` |  List of run IDs to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If prompts is not a list.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the length of `callbacks`, `tags`, `metadata`, or `run_name` (if provided) does not match the length of prompts.  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` agenerate `async` ¶
    
    
    agenerate(
        prompts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        stop: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        callbacks: Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None = None,
        *,
        tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None = None,
        metadata: dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None = None,
        run_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        run_id: [UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> LLMResult
    

Asynchronously pass a sequence of prompts to a model and return generations.

This method should make use of batched calls for models that expose a batched API.

Use this method when you want to:

  1. Take advantage of batched calls,
  2. Need more output from the model than just the top generated value,
  3. Are building chains that are agnostic to the underlying language model type (e.g., pure text completion models vs chat models).

PARAMETER | DESCRIPTION  
---|---  
`prompts` |  List of string prompts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`stop` |  Stop words to use when generating. Model output is cut off at the first occurrence of any of these substrings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`callbacks` |  `Callbacks` to pass through. Used for executing additional functionality, such as logging or streaming, throughout generation. **TYPE:** `Callbacks | [list](https://docs.python.org/3/library/stdtypes.html#list)[Callbacks] | None` **DEFAULT:** `None`  
`tags` |  List of tags to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]] | None` **DEFAULT:** `None`  
`metadata` |  List of metadata dictionaries to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [list](https://docs.python.org/3/library/stdtypes.html#list)[dict[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | None` **DEFAULT:** `None`  
`run_name` |  List of run names to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`run_id` |  List of run IDs to associate with each prompt. If provided, the length of the list must match the length of the prompts list. **TYPE:** `[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[UUID](https://docs.python.org/3/library/uuid.html#uuid.UUID "<code>uuid.UUID</code>") | None] | None` **DEFAULT:** `None`  
`**kwargs` |  Arbitrary additional keyword arguments. These are usually passed to the model provider API call. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the length of `callbacks`, `tags`, `metadata`, or `run_name` (if provided) does not match the length of prompts.  
RETURNS | DESCRIPTION  
---|---  
`LLMResult` |  An `LLMResult`, which contains a list of candidate `Generations` for each input prompt and additional model provider-specific output.  
  
####  `` __str__ ¶
    
    
    __str__() -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Return a string representation of the object for printing.

####  `` dict ¶
    
    
    dict(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> dict
    

Return a dictionary of the LLM.

####  `` save ¶
    
    
    save(file_path: [Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path "<code>pathlib.Path</code>") | [str](https://docs.python.org/3/library/stdtypes.html#str)) -> None
    

Save the LLM.

PARAMETER | DESCRIPTION  
---|---  
`file_path` |  Path to file to save the LLM to. **TYPE:** `[Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path "<code>pathlib.Path</code>") | [str](https://docs.python.org/3/library/stdtypes.html#str)`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the file path is not a string or Path object.  
Example
    
    
    llm.save(file_path="path/llm.yaml")
    

####  `` validate_environment ¶
    
    
    validate_environment() -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Dont do anything if client provided externally

###  `` AmazonKendraRetriever ¶

Bases: `[BaseRetriever](../../langchain_core/retrievers/#langchain_core.retrievers.BaseRetriever "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.retrievers.BaseRetriever</span>")`

`Amazon Kendra Index` retriever.

ATTRIBUTE | DESCRIPTION  
---|---  
`index_id` |  Kendra index id **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`region_name` |  The aws region e.g., `'us-west-2'`. Falls back to `AWS_REGION`/`AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`credentials_profile_name` |  The name of the profile in the `~/.aws/credentials` or `~/.aws/config` files, which has either access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`aws_access_key_id` |  AWS access key id. If provided, `aws_secret_access_key` must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`aws_secret_access_key` |  AWS secret_access_key. If provided, `aws_access_key_id` must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`aws_session_token` |  AWS session token. If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided. Not required unless using temporary credentials. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SESSION_TOKEN` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`endpoint_url` |  Needed if you don't want to default to `'us-east-1'` endpoint. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`config` |  An optional `botocore.config.Config` instance to pass to the client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`top_k` |  No of results to return **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)`  
`attribute_filter` |  Additional filtering of results based on metadata See: <https://docs.aws.amazon.com/kendra/latest/APIReference> **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | None`  
`page_content_formatter` |  generates the Document page_content allowing access to all result item attributes. By default, it uses the item's title and excerpt. **TYPE:** `[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[ResultItem], [str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`client` |  boto3 client for Kendra **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`user_context` |  Provides information about the user context See: <https://docs.aws.amazon.com/kendra/latest/APIReference> **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | None`  
Example
    
    
    retriever = AmazonKendraRetriever(
        index_id="c0806df7-e76b-4bce-9b5c-d5582f6b1a03"
    )
    

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Invoke the retriever to get relevant documents.  
`ainvoke` |  Asynchronously invoke the retriever to get relevant documents.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`is_lc_serializable` |  Is this class serializable?  
`get_lc_namespace` |  Get the namespace of the LangChain object.  
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [type](https://docs.python.org/3/library/functions.html#type)[Input]
    

Input type.

The type of input this `Runnable` accepts specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the input type cannot be inferred.  
  
####  `` OutputType `property` ¶
    
    
    OutputType: [type](https://docs.python.org/3/library/functions.html#type)[Output]
    

Output Type.

The type of output this `Runnable` produces specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the output type cannot be inferred.  
  
####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None
    

Optional list of tags associated with the retriever.

These tags will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Optional metadata associated with the retriever.

This metadata will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Invoke the retriever to get relevant documents.

Main entry point for synchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    retriever.invoke("query")
    

####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Asynchronously invoke the retriever to get relevant documents.

Main entry point for asynchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    await retriever.ainvoke("query")
    

####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Is this class serializable?

By design, even if a class inherits from `Serializable`, it is not serializable by default. This is to prevent accidental serialization of objects that should not be serialized.

RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  Whether the class is serializable. Default is `False`.  
  
####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the LangChain object.

For example, if the class is `langchain.llms.openai.OpenAI`, then the namespace is `["langchain", "llms", "openai"]`

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  The namespace.  
  
####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

###  `` AmazonKnowledgeBasesRetriever ¶

Bases: `[BaseRetriever](../../langchain_core/retrievers/#langchain_core.retrievers.BaseRetriever "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.retrievers.BaseRetriever</span>")`

`Amazon Bedrock Knowledge Bases` retrieval.

See <https://aws.amazon.com/bedrock/knowledge-bases> for more info.

ATTRIBUTE | DESCRIPTION  
---|---  
`knowledge_base_id` |  Knowledge Base ID. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`region_name` |  The aws region e.g., `'us-west-2'`. Fallback to `AWS_REGION`/`AWS_DEFAULT_REGION` env variable or region specified in `~/.aws/config`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`credentials_profile_name` |  The name of the profile in the `~/.aws/credentials` or `~/.aws/config` files, which has either access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`aws_access_key_id` |  AWS access key id. If provided, `aws_secret_access_key` must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`aws_secret_access_key` |  AWS `secret_access_key`. If provided, `aws_access_key_id` must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`aws_session_token` |  AWS session token. If provided, `aws_access_key_id` and `aws_secret_access_key` must also be provided. Not required unless using temporary credentials. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SESSION_TOKEN` environment variable. **TYPE:** `[SecretStr](https://docs.pydantic.dev/latest/api/types/#pydantic.types.SecretStr "<code>pydantic.SecretStr</code>") | None`  
`endpoint_url` |  Needed if you don't want to default to `'us-east-1'` endpoint. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None`  
`config` |  An optional `botocore.config.Config` instance to pass to the client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`client` |  boto3 client for bedrock agent runtime. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`guardrail_config` |  Configuration information for a guardrail that you want to use in the request. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None`  
`retrieval_config` |  Optional configuration for retrieval specified as a Python object (RetrievalConfig) or as a dictionary. **TYPE:** `RetrievalConfig | [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None`  
`min_score_confidence` |  Minimum score confidence threshold for filtering results (0.0 to 1.0). **TYPE:** `[Annotated](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Annotated "<code>typing_extensions.Annotated</code>")[[float](https://docs.python.org/3/library/functions.html#float) | None, [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(ge=0.0, le=1.0, default=None)]`  
Example
    
    
    from langchain_community.retrievers import AmazonKnowledgeBasesRetriever
    
    retriever = AmazonKnowledgeBasesRetriever(
        knowledge_base_id="<knowledge-base-id>",
        retrieval_config={
            "vectorSearchConfiguration": {
                "numberOfResults": 4
            }
        },
    )
    

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Invoke the retriever to get relevant documents.  
`ainvoke` |  Asynchronously invoke the retriever to get relevant documents.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`is_lc_serializable` |  Is this class serializable?  
`get_lc_namespace` |  Get the namespace of the LangChain object.  
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [type](https://docs.python.org/3/library/functions.html#type)[Input]
    

Input type.

The type of input this `Runnable` accepts specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the input type cannot be inferred.  
  
####  `` OutputType `property` ¶
    
    
    OutputType: [type](https://docs.python.org/3/library/functions.html#type)[Output]
    

Output Type.

The type of output this `Runnable` produces specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the output type cannot be inferred.  
  
####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None
    

Optional list of tags associated with the retriever.

These tags will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Optional metadata associated with the retriever.

This metadata will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Invoke the retriever to get relevant documents.

Main entry point for synchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    retriever.invoke("query")
    

####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Asynchronously invoke the retriever to get relevant documents.

Main entry point for asynchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    await retriever.ainvoke("query")
    

####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Is this class serializable?

By design, even if a class inherits from `Serializable`, it is not serializable by default. This is to prevent accidental serialization of objects that should not be serialized.

RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  Whether the class is serializable. Default is `False`.  
  
####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the LangChain object.

For example, if the class is `langchain.llms.openai.OpenAI`, then the namespace is `["langchain", "llms", "openai"]`

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  The namespace.  
  
####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

###  `` AmazonS3VectorsRetriever ¶

Bases: `[VectorStoreRetriever](../../langchain_core/vectorstores/#langchain_core.vectorstores.base.VectorStoreRetriever "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.vectorstores.base.VectorStoreRetriever</span> \(<code>langchain_core.vectorstores.VectorStoreRetriever</code>\)")`

AmazonS3VectorsRetriever is a retriever for Amazon S3 Vectors.

Examples:
    
    
    from langchain_aws.vectorstores import AmazonS3Vectors
    
    vector_store = AmazonS3Vectors(...)
    retriever = vector_store.as_retriever()
    

METHOD | DESCRIPTION  
---|---  
`get_name` |  Get the name of the `Runnable`.  
`get_input_schema` |  Get a Pydantic model that can be used to validate input to the `Runnable`.  
`get_input_jsonschema` |  Get a JSON schema that represents the input to the `Runnable`.  
`get_output_schema` |  Get a Pydantic model that can be used to validate output to the `Runnable`.  
`get_output_jsonschema` |  Get a JSON schema that represents the output of the `Runnable`.  
`config_schema` |  The type of config this `Runnable` accepts specified as a Pydantic model.  
`get_config_jsonschema` |  Get a JSON schema that represents the config of the `Runnable`.  
`get_graph` |  Return a graph representation of this `Runnable`.  
`get_prompts` |  Return a list of prompts used by this `Runnable`.  
`__or__` |  Runnable "or" operator.  
`__ror__` |  Runnable "reverse-or" operator.  
`pipe` |  Pipe `Runnable` objects.  
`pick` |  Pick keys from the output `dict` of this `Runnable`.  
`assign` |  Assigns new fields to the `dict` output of this `Runnable`.  
`invoke` |  Invoke the retriever to get relevant documents.  
`ainvoke` |  Asynchronously invoke the retriever to get relevant documents.  
`batch` |  Default implementation runs invoke in parallel using a thread pool executor.  
`batch_as_completed` |  Run `invoke` in parallel on a list of inputs.  
`abatch` |  Default implementation runs `ainvoke` in parallel using `asyncio.gather`.  
`abatch_as_completed` |  Run `ainvoke` in parallel on a list of inputs.  
`stream` |  Default implementation of `stream`, which calls `invoke`.  
`astream` |  Default implementation of `astream`, which calls `ainvoke`.  
`astream_log` |  Stream all output from a `Runnable`, as reported to the callback system.  
`astream_events` |  Generate a stream of events.  
`transform` |  Transform inputs to outputs.  
`atransform` |  Transform inputs to outputs.  
`bind` |  Bind arguments to a `Runnable`, returning a new `Runnable`.  
`with_config` |  Bind config to a `Runnable`, returning a new `Runnable`.  
`with_listeners` |  Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.  
`with_alisteners` |  Bind async lifecycle listeners to a `Runnable`.  
`with_types` |  Bind input and output types to a `Runnable`, returning a new `Runnable`.  
`with_retry` |  Create a new `Runnable` that retries the original `Runnable` on exceptions.  
`map` |  Return a new `Runnable` that maps a list of inputs to a list of outputs.  
`with_fallbacks` |  Add fallbacks to a `Runnable`, returning a new `Runnable`.  
`as_tool` |  Create a `BaseTool` from a `Runnable`.  
`__init__` |   
`is_lc_serializable` |  Is this class serializable?  
`get_lc_namespace` |  Get the namespace of the LangChain object.  
`lc_id` |  Return a unique identifier for this class for serialization purposes.  
`to_json` |  Serialize the `Runnable` to JSON.  
`to_json_not_implemented` |  Serialize a "not implemented" object.  
`configurable_fields` |  Configure particular `Runnable` fields at runtime.  
`configurable_alternatives` |  Configure alternatives for `Runnable` objects that can be set at runtime.  
`validate_search_type` |  Validate search type.  
`add_documents` |  Add documents to the `VectorStore`.  
`aadd_documents` |  Async add documents to the `VectorStore`.  
  
####  `` name `class-attribute` `instance-attribute` ¶
    
    
    name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    

The name of the `Runnable`. Used for debugging and tracing.

####  `` InputType `property` ¶
    
    
    InputType: [type](https://docs.python.org/3/library/functions.html#type)[Input]
    

Input type.

The type of input this `Runnable` accepts specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the input type cannot be inferred.  
  
####  `` OutputType `property` ¶
    
    
    OutputType: [type](https://docs.python.org/3/library/functions.html#type)[Output]
    

Output Type.

The type of output this `Runnable` produces specified as a type annotation.

RAISES | DESCRIPTION  
---|---  
`[TypeError](https://docs.python.org/3/library/exceptions.html#TypeError)` |  If the output type cannot be inferred.  
  
####  `` input_schema `property` ¶
    
    
    input_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of input this `Runnable` accepts specified as a Pydantic model.

####  `` output_schema `property` ¶
    
    
    output_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Output schema.

The type of output this `Runnable` produces specified as a Pydantic model.

####  `` config_specs `property` ¶
    
    
    config_specs: [list](https://docs.python.org/3/library/stdtypes.html#list)[ConfigurableFieldSpec]
    

List configurable fields for this `Runnable`.

####  `` lc_secrets `property` ¶
    
    
    lc_secrets: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)]
    

A map of constructor argument names to secret ids.

For example, `{"openai_api_key": "OPENAI_API_KEY"}`

####  `` lc_attributes `property` ¶
    
    
    lc_attributes: [dict](https://docs.python.org/3/library/stdtypes.html#dict)
    

List of attribute names that should be included in the serialized kwargs.

These attributes must be accepted by the constructor.

Default is an empty dictionary.

####  `` tags `class-attribute` `instance-attribute` ¶
    
    
    tags: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None
    

Optional list of tags associated with the retriever.

These tags will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` metadata `class-attribute` `instance-attribute` ¶
    
    
    metadata: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | None = None
    

Optional metadata associated with the retriever.

This metadata will be associated with each call to this retriever, and passed as arguments to the handlers defined in `callbacks`.

You can use these to eg identify a specific instance of a retriever with its use case.

####  `` vectorstore `instance-attribute` ¶
    
    
    vectorstore: [VectorStore](../../langchain_core/vectorstores/#langchain_core.vectorstores.base.VectorStore "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.vectorstores.base.VectorStore</span>")
    

VectorStore to use for retrieval.

####  `` search_type `class-attribute` `instance-attribute` ¶
    
    
    search_type: [str](https://docs.python.org/3/library/stdtypes.html#str) = 'similarity'
    

Type of search to perform.

####  `` search_kwargs `class-attribute` `instance-attribute` ¶
    
    
    search_kwargs: [dict](https://docs.python.org/3/library/stdtypes.html#dict) = [Field](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "<code>pydantic.Field</code>")(default_factory=[dict](https://docs.python.org/3/library/stdtypes.html#dict))
    

Keyword arguments to pass to the search function.

####  `` get_name ¶
    
    
    get_name(suffix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None, *, name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None) -> [str](https://docs.python.org/3/library/stdtypes.html#str)
    

Get the name of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`suffix` |  An optional suffix to append to the name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`name` |  An optional name to use instead of the `Runnable`'s name. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The name of the `Runnable`.  
  
####  `` get_input_schema ¶
    
    
    get_input_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate input to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic input schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an input schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate input.  
  
####  `` get_input_jsonschema ¶
    
    
    get_input_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the input to the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the input to the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_input_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` get_output_schema ¶
    
    
    get_output_schema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

Get a Pydantic model that can be used to validate output to the `Runnable`.

`Runnable` objects that leverage the `configurable_fields` and `configurable_alternatives` methods will have a dynamic output schema that depends on which configuration the `Runnable` is invoked with.

This method allows to get an output schema for a specific configuration.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate output.  
  
####  `` get_output_jsonschema ¶
    
    
    get_output_jsonschema(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the output of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  A config to use when generating the schema. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the output of the `Runnable`.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(add_one)
    
    print(runnable.get_output_jsonschema())
    

Added in `langchain-core` 0.3.0

####  `` config_schema ¶
    
    
    config_schema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]
    

The type of config this `Runnable` accepts specified as a Pydantic model.

To mark a field as configurable, see the `configurable_fields` and `configurable_alternatives` methods.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")]` |  A Pydantic model that can be used to validate config.  
  
####  `` get_config_jsonschema ¶
    
    
    get_config_jsonschema(*, include: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None) -> [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Get a JSON schema that represents the config of the `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`include` |  A list of fields to include in the config schema. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A JSON schema that represents the config of the `Runnable`.  
  
Added in `langchain-core` 0.3.0

####  `` get_graph ¶
    
    
    get_graph(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> Graph
    

Return a graph representation of this `Runnable`.

####  `` get_prompts ¶
    
    
    get_prompts(config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[BasePromptTemplate]
    

Return a list of prompts used by this `Runnable`.

####  `` __or__ ¶
    
    
    __or__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Runnable "or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` __ror__ ¶
    
    
    __ror__(
        other: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]
    

Runnable "reverse-or" operator.

Compose this `Runnable` with another object to create a `RunnableSequence`.

PARAMETER | DESCRIPTION  
---|---  
`other` |  Another `Runnable` or a `Runnable`-like object. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Other]], [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Other]], [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Other, [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Other], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Other, Output]` |  A new `Runnable`.  
  
####  `` pipe ¶
    
    
    pipe(
        *others: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other], name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]
    

Pipe `Runnable` objects.

Compose this `Runnable` with `Runnable`-like objects to make a `RunnableSequence`.

Equivalent to `RunnableSequence(self, *others)` or `self | others[0] | ...`

Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def add_one(x: int) -> int:
        return x + 1
    
    
    def mul_two(x: int) -> int:
        return x * 2
    
    
    runnable_1 = RunnableLambda(add_one)
    runnable_2 = RunnableLambda(mul_two)
    sequence = runnable_1.pipe(runnable_2)
    # Or equivalently:
    # sequence = runnable_1 | runnable_2
    # sequence = RunnableSequence(first=runnable_1, last=runnable_2)
    sequence.invoke(1)
    await sequence.ainvoke(1)
    # -> 4
    
    sequence.batch([1, 2, 3])
    await sequence.abatch([1, 2, 3])
    # -> [4, 6, 8]
    

PARAMETER | DESCRIPTION  
---|---  
`*others` |  Other `Runnable` or `Runnable`-like objects to compose **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), Other] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], Other]` **DEFAULT:** `()`  
`name` |  An optional name for the resulting `RunnableSequence`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Other]` |  A new `Runnable`.  
  
####  `` pick ¶
    
    
    pick(keys: [str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Pick keys from the output `dict` of this `Runnable`.

Pick a single key:
    
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    chain = RunnableMap(str=as_str, json=as_json)
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3]}
    
    json_only_chain = chain.pick("json")
    json_only_chain.invoke("[1, 2, 3]")
    # -> [1, 2, 3]
    

Pick a list of keys:
    
    
    from typing import Any
    
    import json
    
    from langchain_core.runnables import RunnableLambda, RunnableMap
    
    as_str = RunnableLambda(str)
    as_json = RunnableLambda(json.loads)
    
    
    def as_bytes(x: Any) -> bytes:
        return bytes(x, "utf-8")
    
    
    chain = RunnableMap(str=as_str, json=as_json, bytes=RunnableLambda(as_bytes))
    
    chain.invoke("[1, 2, 3]")
    # -> {"str": "[1, 2, 3]", "json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    
    json_and_bytes_chain = chain.pick(["json", "bytes"])
    json_and_bytes_chain.invoke("[1, 2, 3]")
    # -> {"json": [1, 2, 3], "bytes": b"[1, 2, 3]"}
    

PARAMETER | DESCRIPTION  
---|---  
`keys` |  A key or list of keys to pick from the output dict. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  a new `Runnable`.  
  
####  `` assign ¶
    
    
    assign(
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
        | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]
    

Assigns new fields to the `dict` output of this `Runnable`.
    
    
    from langchain_core.language_models.fake import FakeStreamingListLLM
    from langchain_core.output_parsers import StrOutputParser
    from langchain_core.prompts import SystemMessagePromptTemplate
    from langchain_core.runnables import Runnable
    from operator import itemgetter
    
    prompt = (
        SystemMessagePromptTemplate.from_template("You are a nice assistant.")
        + "{question}"
    )
    model = FakeStreamingListLLM(responses=["foo-lish"])
    
    chain: Runnable = prompt | model | {"str": StrOutputParser()}
    
    chain_with_assign = chain.assign(hello=itemgetter("str") | model)
    
    print(chain_with_assign.input_schema.model_json_schema())
    # {'title': 'PromptInput', 'type': 'object', 'properties':
    {'question': {'title': 'Question', 'type': 'string'}}}
    print(chain_with_assign.output_schema.model_json_schema())
    # {'title': 'RunnableSequenceOutput', 'type': 'object', 'properties':
    {'str': {'title': 'Str',
    'type': 'string'}, 'hello': {'title': 'Hello', 'type': 'string'}}}
    

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A mapping of keys to `Runnable` or `Runnable`-like objects that will be invoked with the entire output dict of this `Runnable`. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping "<code>collections.abc.Mapping</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str), [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]], [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]` |  A new `Runnable`.  
  
####  `` invoke ¶
    
    
    invoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Invoke the retriever to get relevant documents.

Main entry point for synchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    retriever.invoke("query")
    

####  `` ainvoke `async` ¶
    
    
    ainvoke(
        input: [str](https://docs.python.org/3/library/stdtypes.html#str), config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Asynchronously invoke the retriever to get relevant documents.

Main entry point for asynchronous retriever invocations.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The query string. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`config` |  Configuration for the retriever. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span>") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional arguments to pass to the retriever. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of relevant documents.  
  
Examples: 
    
    
    await retriever.ainvoke("query")
    

####  `` batch ¶
    
    
    batch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs invoke in parallel using a thread pool executor.

The default implementation of batch works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` batch_as_completed ¶
    
    
    batch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `invoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]` |  Tuples of the index of the input and the output from the `Runnable`.  
  
####  `` abatch `async` ¶
    
    
    abatch(
        inputs: [list](https://docs.python.org/3/library/stdtypes.html#list)[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]
    

Default implementation runs `ainvoke` in parallel using `asyncio.gather`.

The default implementation of `batch` works well for IO bound runnables.

Subclasses must override this method if they can batch more efficiently; e.g., if the underlying `Runnable` uses an API which supports a batch mode.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [list](https://docs.python.org/3/library/stdtypes.html#list)[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[Output]` |  A list of outputs from the `Runnable`.  
  
####  `` abatch_as_completed `async` ¶
    
    
    abatch_as_completed(
        inputs: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None = None,
        *,
        return_exceptions: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]
    

Run `ainvoke` in parallel on a list of inputs.

Yields results as they complete.

PARAMETER | DESCRIPTION  
---|---  
`inputs` |  A list of inputs to the `Runnable`. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[Input]`  
`config` |  A config to use when invoking the `Runnable`. The config supports standard keys like `'tags'`, `'metadata'` for tracing purposes, `'max_concurrency'` for controlling how much work to do in parallel, and other keys. Please refer to `RunnableConfig` for more details. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")] | None` **DEFAULT:** `None`  
`return_exceptions` |  Whether to return exceptions instead of raising them. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[int](https://docs.python.org/3/library/functions.html#int), Output | [Exception](https://docs.python.org/3/library/exceptions.html#Exception)]]` |  A tuple of the index of the input and the output from the `Runnable`.  
  
####  `` stream ¶
    
    
    stream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Default implementation of `stream`, which calls `invoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` astream `async` ¶
    
    
    astream(
        input: Input, config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Default implementation of `astream`, which calls `ainvoke`.

Subclasses must override this method if they support streaming output.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `Input`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` astream_log `async` ¶
    
    
    astream_log(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        diff: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        with_streamed_output_list: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]
    

Stream all output from a `Runnable`, as reported to the callback system.

This includes all inner runs of LLMs, Retrievers, Tools, etc.

Output is streamed as Log objects, which include a list of Jsonpatch ops that describe how the state of the run has changed in each step, and the final state of the run.

The Jsonpatch ops can be applied in order to construct state.

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`diff` |  Whether to yield diffs between each step or the current state. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`with_streamed_output_list` |  Whether to yield the `streamed_output` list. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`include_names` |  Only include logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude logs with these names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude logs with these types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude logs with these tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLogPatch] | [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[RunLog]` |  A `RunLogPatch` or `RunLog` object.  
  
####  `` astream_events `async` ¶
    
    
    astream_events(
        input: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        *,
        version: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["v1", "v2"] = "v2",
        include_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        include_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_names: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_types: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        exclude_tags: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]
    

Generate a stream of events.

Use to create an iterator over `StreamEvent` that provide real-time information about the progress of the `Runnable`, including `StreamEvent` from intermediate results.

A `StreamEvent` is a dictionary with the following schema:

  * `event`: Event names are of the format: `on_[runnable_type]_(start|stream|end)`.
  * `name`: The name of the `Runnable` that generated the event.
  * `run_id`: Randomly generated ID associated with the given execution of the `Runnable` that emitted the event. A child `Runnable` that gets invoked as part of the execution of a parent `Runnable` is assigned its own unique ID.
  * `parent_ids`: The IDs of the parent runnables that generated the event. The root `Runnable` will have an empty list. The order of the parent IDs is from the root to the immediate parent. Only available for v2 version of the API. The v1 version of the API will return an empty list.
  * `tags`: The tags of the `Runnable` that generated the event.
  * `metadata`: The metadata of the `Runnable` that generated the event.
  * `data`: The data associated with the event. The contents of this field depend on the type of event. See the table below for more details.



Below is a table that illustrates some events that might be emitted by various chains. Metadata fields have been omitted from the table for brevity. Chain definitions have been included after the table.

Note

This reference table is for the v2 version of the schema.

event | name | chunk | input | output  
---|---|---|---|---  
`on_chat_model_start` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` |   
`on_chat_model_stream` | `'[model name]'` | `AIMessageChunk(content="hello")` |  |   
`on_chat_model_end` | `'[model name]'` |  | `{"messages": [[SystemMessage, HumanMessage]]}` | `AIMessageChunk(content="hello world")`  
`on_llm_start` | `'[model name]'` |  | `{'input': 'hello'}` |   
`on_llm_stream` | `'[model name]'` | `'Hello'` |  |   
`on_llm_end` | `'[model name]'` |  | `'Hello human!'` |   
`on_chain_start` | `'format_docs'` |  |  |   
`on_chain_stream` | `'format_docs'` | `'hello world!, goodbye world!'` |  |   
`on_chain_end` | `'format_docs'` |  | `[Document(...)]` | `'hello world!, goodbye world!'`  
`on_tool_start` | `'some_tool'` |  | `{"x": 1, "y": "2"}` |   
`on_tool_end` | `'some_tool'` |  |  | `{"x": 1, "y": "2"}`  
`on_retriever_start` | `'[retriever name]'` |  | `{"query": "hello"}` |   
`on_retriever_end` | `'[retriever name]'` |  | `{"query": "hello"}` | `[Document(...), ..]`  
`on_prompt_start` | `'[template_name]'` |  | `{"question": "hello"}` |   
`on_prompt_end` | `'[template_name]'` |  | `{"question": "hello"}` | `ChatPromptValue(messages: [SystemMessage, ...])`  
  
In addition to the standard events, users can also dispatch custom events (see example below).

Custom events will be only be surfaced with in the v2 version of the API!

A custom event has following format:

Attribute | Type | Description  
---|---|---  
`name` | `str` | A user defined name for the event.  
`data` | `Any` | The data associated with the event. This can be anything, though we suggest making it JSON serializable.  
  
Here are declarations associated with the standard events shown above:

`format_docs`:
    
    
    def format_docs(docs: list[Document]) -> str:
        '''Format the docs.'''
        return ", ".join([doc.page_content for doc in docs])
    
    
    format_docs = RunnableLambda(format_docs)
    

`some_tool`:
    
    
    @tool
    def some_tool(x: int, y: str) -> dict:
        '''Some_tool.'''
        return {"x": x, "y": y}
    

`prompt`:
    
    
    template = ChatPromptTemplate.from_messages(
        [
            ("system", "You are Cat Agent 007"),
            ("human", "{question}"),
        ]
    ).with_config({"run_name": "my_template", "tags": ["my_template"]})
    

For instance:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    async def reverse(s: str) -> str:
        return s[::-1]
    
    
    chain = RunnableLambda(func=reverse)
    
    events = [event async for event in chain.astream_events("hello", version="v2")]
    
    # Will produce the following events
    # (run_id, and parent_ids has been omitted for brevity):
    [
        {
            "data": {"input": "hello"},
            "event": "on_chain_start",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"chunk": "olleh"},
            "event": "on_chain_stream",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
        {
            "data": {"output": "olleh"},
            "event": "on_chain_end",
            "metadata": {},
            "name": "reverse",
            "tags": [],
        },
    ]
    

Example: Dispatch Custom Event
    
    
    from langchain_core.callbacks.manager import (
        adispatch_custom_event,
    )
    from langchain_core.runnables import RunnableLambda, RunnableConfig
    import asyncio
    
    
    async def slow_thing(some_input: str, config: RunnableConfig) -> str:
        """Do something that takes a long time."""
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 1 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        await adispatch_custom_event(
            "progress_event",
            {"message": "Finished step 2 of 3"},
            config=config # Must be included for python < 3.10
        )
        await asyncio.sleep(1) # Placeholder for some slow operation
        return "Done"
    
    slow_thing = RunnableLambda(slow_thing)
    
    async for event in slow_thing.astream_events("some_input", version="v2"):
        print(event)
    

PARAMETER | DESCRIPTION  
---|---  
`input` |  The input to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`version` |  The version of the schema to use either `'v2'` or `'v1'`. Users should use `'v2'`. `'v1'` is for backwards compatibility and will be deprecated in `0.4.0`. No default will be assigned until the API is stabilized. custom events will only be surfaced in `'v2'`. **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['v1', 'v2']` **DEFAULT:** `'v2'`  
`include_names` |  Only include events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_types` |  Only include events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`include_tags` |  Only include events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_names` |  Exclude events from `Runnable` objects with matching names. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_types` |  Exclude events from `Runnable` objects with matching types. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`exclude_tags` |  Exclude events from `Runnable` objects with matching tags. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. These will be passed to `astream_log` as this implementation of `astream_events` is built on top of `astream_log`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[StreamEvent]` |  An async stream of `StreamEvent`.  
RAISES | DESCRIPTION  
---|---  
`[NotImplementedError](https://docs.python.org/3/library/exceptions.html#NotImplementedError)` |  If the version is not `'v1'` or `'v2'`.  
  
####  `` transform ¶
    
    
    transform(
        input: [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input], config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None
    ) -> [Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of transform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An iterator of inputs to the `Runnable`. **TYPE:** `[Iterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator "<code>collections.abc.Iterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`Output` |  The output of the `Runnable`.  
  
####  `` atransform `async` ¶
    
    
    atransform(
        input: [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input],
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None,
    ) -> [AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]
    

Transform inputs to outputs.

Default implementation of atransform, which buffers input and calls `astream`.

Subclasses must override this method if they can start producing output while input is still being generated.

PARAMETER | DESCRIPTION  
---|---  
`input` |  An async iterator of inputs to the `Runnable`. **TYPE:** `[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Input]`  
`config` |  The config to use for the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") | None` **DEFAULT:** `{}`  
YIELDS | DESCRIPTION  
---|---  
`[AsyncIterator](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "<code>collections.abc.AsyncIterator</code>")[Output]` |  The output of the `Runnable`.  
  
####  `` bind ¶
    
    
    bind(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind arguments to a `Runnable`, returning a new `Runnable`.

Useful when a `Runnable` in a chain requires an argument that is not in the output of the previous `Runnable` or included in the user input.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  The arguments to bind to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the arguments bound.  
Example
    
    
    from langchain_ollama import ChatOllama
    from langchain_core.output_parsers import StrOutputParser
    
    model = ChatOllama(model="llama3.1")
    
    # Without bind
    chain = model | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two three four five.'
    
    # With bind
    chain = model.bind(stop=["three"]) | StrOutputParser()
    
    chain.invoke("Repeat quoted words exactly: 'One two three four five.'")
    # Output is 'One two'
    

####  `` with_config ¶
    
    
    with_config(
        config: [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind config to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`config` |  The config to bind to the `Runnable`. **TYPE:** `[RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)") | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the `Runnable`. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the config bound.  
  
####  `` with_listeners ¶
    
    
    with_listeners(
        *,
        on_start: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
        on_end: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None = None,
        on_error: [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None]
        | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None]
        | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind lifecycle listeners to a `Runnable`, returning a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called before the `Runnable` starts running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_end` |  Called after the `Runnable` finishes running, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
`on_error` |  Called if the `Runnable` throws an error, with the `Run` object. **TYPE:** `[Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run], None] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[Run, [RunnableConfig](../../langchain_core/runnables/#langchain_core.runnables.RunnableConfig "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.RunnableConfig</span> \(<code>langchain_core.runnables.config.RunnableConfig</code>\)")], None] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    from langchain_core.tracers.schemas import Run
    
    import time
    
    
    def test_runnable(time_to_sleep: int):
        time.sleep(time_to_sleep)
    
    
    def fn_start(run_obj: Run):
        print("start_time:", run_obj.start_time)
    
    
    def fn_end(run_obj: Run):
        print("end_time:", run_obj.end_time)
    
    
    chain = RunnableLambda(test_runnable).with_listeners(
        on_start=fn_start, on_end=fn_end
    )
    chain.invoke(2)
    

####  `` with_alisteners ¶
    
    
    with_alisteners(
        *,
        on_start: AsyncListener | None = None,
        on_end: AsyncListener | None = None,
        on_error: AsyncListener | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind async lifecycle listeners to a `Runnable`.

Returns a new `Runnable`.

The Run object contains information about the run, including its `id`, `type`, `input`, `output`, `error`, `start_time`, `end_time`, and any tags or metadata added to the run.

PARAMETER | DESCRIPTION  
---|---  
`on_start` |  Called asynchronously before the `Runnable` starts running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_end` |  Called asynchronously after the `Runnable` finishes running, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
`on_error` |  Called asynchronously if the `Runnable` throws an error, with the `Run` object. **TYPE:** `AsyncListener | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the listeners bound.  
Example
    
    
    from langchain_core.runnables import RunnableLambda, Runnable
    from datetime import datetime, timezone
    import time
    import asyncio
    
    
    def format_t(timestamp: float) -> str:
        return datetime.fromtimestamp(timestamp, tz=timezone.utc).isoformat()
    
    
    async def test_runnable(time_to_sleep: int):
        print(f"Runnable[{time_to_sleep}s]: starts at {format_t(time.time())}")
        await asyncio.sleep(time_to_sleep)
        print(f"Runnable[{time_to_sleep}s]: ends at {format_t(time.time())}")
    
    
    async def fn_start(run_obj: Runnable):
        print(f"on start callback starts at {format_t(time.time())}")
        await asyncio.sleep(3)
        print(f"on start callback ends at {format_t(time.time())}")
    
    
    async def fn_end(run_obj: Runnable):
        print(f"on end callback starts at {format_t(time.time())}")
        await asyncio.sleep(2)
        print(f"on end callback ends at {format_t(time.time())}")
    
    
    runnable = RunnableLambda(test_runnable).with_alisteners(
        on_start=fn_start, on_end=fn_end
    )
    
    
    async def concurrent_runs():
        await asyncio.gather(runnable.ainvoke(2), runnable.ainvoke(3))
    
    
    asyncio.run(concurrent_runs())
    # Result:
    # on start callback starts at 2025-03-01T07:05:22.875378+00:00
    # on start callback starts at 2025-03-01T07:05:22.875495+00:00
    # on start callback ends at 2025-03-01T07:05:25.878862+00:00
    # on start callback ends at 2025-03-01T07:05:25.878947+00:00
    # Runnable[2s]: starts at 2025-03-01T07:05:25.879392+00:00
    # Runnable[3s]: starts at 2025-03-01T07:05:25.879804+00:00
    # Runnable[2s]: ends at 2025-03-01T07:05:27.881998+00:00
    # on end callback starts at 2025-03-01T07:05:27.882360+00:00
    # Runnable[3s]: ends at 2025-03-01T07:05:28.881737+00:00
    # on end callback starts at 2025-03-01T07:05:28.882428+00:00
    # on end callback ends at 2025-03-01T07:05:29.883893+00:00
    # on end callback ends at 2025-03-01T07:05:30.884831+00:00
    

####  `` with_types ¶
    
    
    with_types(
        *, input_type: [type](https://docs.python.org/3/library/functions.html#type)[Input] | None = None, output_type: [type](https://docs.python.org/3/library/functions.html#type)[Output] | None = None
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Bind input and output types to a `Runnable`, returning a new `Runnable`.

PARAMETER | DESCRIPTION  
---|---  
`input_type` |  The input type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Input] | None` **DEFAULT:** `None`  
`output_type` |  The output type to bind to the `Runnable`. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[Output] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` with the types bound.  
  
####  `` with_retry ¶
    
    
    with_retry(
        *,
        retry_if_exception_type: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        wait_exponential_jitter: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        exponential_jitter_params: ExponentialJitterParams | None = None,
        stop_after_attempt: [int](https://docs.python.org/3/library/functions.html#int) = 3,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]
    

Create a new `Runnable` that retries the original `Runnable` on exceptions.

PARAMETER | DESCRIPTION  
---|---  
`retry_if_exception_type` |  A tuple of exception types to retry on. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`wait_exponential_jitter` |  Whether to add jitter to the wait time between retries. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`stop_after_attempt` |  The maximum number of attempts to make before giving up. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `3`  
`exponential_jitter_params` |  Parameters for `tenacity.wait_exponential_jitter`. Namely: `initial`, `max`, `exp_base`, and `jitter` (all `float` values). **TYPE:** `ExponentialJitterParams | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]` |  A new `Runnable` that retries the original `Runnable` on exceptions.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    count = 0
    
    
    def _lambda(x: int) -> None:
        global count
        count = count + 1
        if x == 1:
            raise ValueError("x is 1")
        else:
            pass
    
    
    runnable = RunnableLambda(_lambda)
    try:
        runnable.with_retry(
            stop_after_attempt=2,
            retry_if_exception_type=(ValueError,),
        ).invoke(1)
    except ValueError:
        pass
    
    assert count == 2
    

####  `` map ¶
    
    
    map() -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]
    

Return a new `Runnable` that maps a list of inputs to a list of outputs.

Calls `invoke` with each input.

RETURNS | DESCRIPTION  
---|---  
`[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[[list](https://docs.python.org/3/library/stdtypes.html#list)[Input], [list](https://docs.python.org/3/library/stdtypes.html#list)[Output]]` |  A new `Runnable` that maps a list of inputs to a list of outputs.  
Example
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def _lambda(x: int) -> int:
        return x + 1
    
    
    runnable = RunnableLambda(_lambda)
    print(runnable.map().invoke([1, 2, 3]))  # [2, 3, 4]
    

####  `` with_fallbacks ¶
    
    
    with_fallbacks(
        fallbacks: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
        *,
        exceptions_to_handle: [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...] = ([Exception](https://docs.python.org/3/library/exceptions.html#Exception),),
        exception_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> RunnableWithFallbacks[Input, Output]
    

Add fallbacks to a `Runnable`, returning a new `Runnable`.

The new `Runnable` will try the original `Runnable`, and then each fallback in order, upon failures.

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
Example
    
    
    from typing import Iterator
    
    from langchain_core.runnables import RunnableGenerator
    
    
    def _generate_immediate_error(input: Iterator) -> Iterator[str]:
        raise ValueError()
        yield ""
    
    
    def _generate(input: Iterator) -> Iterator[str]:
        yield from "foo bar"
    
    
    runnable = RunnableGenerator(_generate_immediate_error).with_fallbacks(
        [RunnableGenerator(_generate)]
    )
    print("".join(runnable.stream({})))  # foo bar
    

PARAMETER | DESCRIPTION  
---|---  
`fallbacks` |  A sequence of runnables to try if the original `Runnable` fails. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]`  
`exceptions_to_handle` |  A tuple of exception types to handle. **TYPE:** `[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[type](https://docs.python.org/3/library/functions.html#type)[[BaseException](https://docs.python.org/3/library/exceptions.html#BaseException)], ...]` **DEFAULT:** `([Exception](https://docs.python.org/3/library/exceptions.html#Exception),)`  
`exception_key` |  If `string` is specified then handled exceptions will be passed to fallbacks as part of the input under the specified key. If `None`, exceptions will not be passed to fallbacks. If used, the base `Runnable` and its fallbacks must accept a dictionary as input. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`RunnableWithFallbacks[Input, Output]` |  A new `Runnable` that will try the original `Runnable`, and then each Fallback in order, upon failures.  
  
####  `` as_tool ¶
    
    
    as_tool(
        args_schema: [type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None = None,
        *,
        name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        description: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        arg_types: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None = None,
    ) -> [BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")
    

Create a `BaseTool` from a `Runnable`.

`as_tool` will instantiate a `BaseTool` with a name, description, and `args_schema` from a `Runnable`. Where possible, schemas are inferred from `runnable.get_input_schema`.

Alternatively (e.g., if the `Runnable` takes a dict as input and the specific `dict` keys are not typed), the schema can be specified directly with `args_schema`.

You can also pass `arg_types` to just specify the required arguments and their types.

PARAMETER | DESCRIPTION  
---|---  
`args_schema` |  The schema for the tool. **TYPE:** `[type](https://docs.python.org/3/library/functions.html#type)[[BaseModel](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel "<code>pydantic.BaseModel</code>")] | None` **DEFAULT:** `None`  
`name` |  The name of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`description` |  The description of the tool. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`arg_types` |  A dictionary of argument names to types. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [type](https://docs.python.org/3/library/functions.html#type)] | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[BaseTool](../../langchain/tools/#langchain.tools.BaseTool "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain.tools.BaseTool</span> \(<code>langchain_core.tools.BaseTool</code>\)")` |  A `BaseTool` instance.  
  
Typed dict input:
    
    
    from typing_extensions import TypedDict
    from langchain_core.runnables import RunnableLambda
    
    
    class Args(TypedDict):
        a: int
        b: list[int]
    
    
    def f(x: Args) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool()
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `args_schema`:
    
    
    from typing import Any
    from pydantic import BaseModel, Field
    from langchain_core.runnables import RunnableLambda
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    class FSchema(BaseModel):
        """Apply a function to an integer and list of integers."""
    
        a: int = Field(..., description="Integer")
        b: list[int] = Field(..., description="List of ints")
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(FSchema)
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`dict` input, specifying schema via `arg_types`:
    
    
    from typing import Any
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: dict[str, Any]) -> str:
        return str(x["a"] * max(x["b"]))
    
    
    runnable = RunnableLambda(f)
    as_tool = runnable.as_tool(arg_types={"a": int, "b": list[int]})
    as_tool.invoke({"a": 3, "b": [1, 2]})
    

`str` input:
    
    
    from langchain_core.runnables import RunnableLambda
    
    
    def f(x: str) -> str:
        return x + "a"
    
    
    def g(x: str) -> str:
        return x + "z"
    
    
    runnable = RunnableLambda(f) | g
    as_tool = runnable.as_tool()
    as_tool.invoke("b")
    

####  `` __init__ ¶
    
    
    __init__(*args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

####  `` is_lc_serializable `classmethod` ¶
    
    
    is_lc_serializable() -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Is this class serializable?

By design, even if a class inherits from `Serializable`, it is not serializable by default. This is to prevent accidental serialization of objects that should not be serialized.

RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool)` |  Whether the class is serializable. Default is `False`.  
  
####  `` get_lc_namespace `classmethod` ¶
    
    
    get_lc_namespace() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Get the namespace of the LangChain object.

For example, if the class is `langchain.llms.openai.OpenAI`, then the namespace is `["langchain", "llms", "openai"]`

RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  The namespace.  
  
####  `` lc_id `classmethod` ¶
    
    
    lc_id() -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Return a unique identifier for this class for serialization purposes.

The unique identifier is a list of strings that describes the path to the object.

For example, for the class `langchain.llms.openai.OpenAI`, the id is `["langchain", "llms", "openai", "OpenAI"]`.

####  `` to_json ¶
    
    
    to_json() -> SerializedConstructor | SerializedNotImplemented
    

Serialize the `Runnable` to JSON.

RETURNS | DESCRIPTION  
---|---  
`SerializedConstructor | SerializedNotImplemented` |  A JSON-serializable representation of the `Runnable`.  
  
####  `` to_json_not_implemented ¶
    
    
    to_json_not_implemented() -> SerializedNotImplemented
    

Serialize a "not implemented" object.

RETURNS | DESCRIPTION  
---|---  
`SerializedNotImplemented` |  `SerializedNotImplemented`.  
  
####  `` configurable_fields ¶
    
    
    configurable_fields(
        **kwargs: AnyConfigurableField,
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure particular `Runnable` fields at runtime.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  A dictionary of `ConfigurableField` instances to configure. **TYPE:** `AnyConfigurableField` **DEFAULT:** `{}`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If a configuration key is not found in the `Runnable`.  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the fields configured.  
      
    
    from langchain_core.runnables import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatOpenAI(max_tokens=20).configurable_fields(
        max_tokens=ConfigurableField(
            id="output_token_number",
            name="Max tokens in the output",
            description="The maximum number of tokens in the output",
        )
    )
    
    # max_tokens = 20
    print("max_tokens_20: ", model.invoke("tell me something about chess").content)
    
    # max_tokens = 200
    print(
        "max_tokens_200: ",
        model.with_config(configurable={"output_token_number": 200})
        .invoke("tell me something about chess")
        .content,
    )
    

####  `` configurable_alternatives ¶
    
    
    configurable_alternatives(
        which: ConfigurableField,
        *,
        default_key: [str](https://docs.python.org/3/library/stdtypes.html#str) = "default",
        prefix_keys: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        **kwargs: [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]],
    ) -> [RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]
    

Configure alternatives for `Runnable` objects that can be set at runtime.

PARAMETER | DESCRIPTION  
---|---  
`which` |  The `ConfigurableField` instance that will be used to select the alternative. **TYPE:** `ConfigurableField`  
`default_key` |  The default key to use if no alternative is selected. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)` **DEFAULT:** `'default'`  
`prefix_keys` |  Whether to prefix the keys with the `ConfigurableField` id. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `False`  
`**kwargs` |  A dictionary of keys to `Runnable` instances or callables that return `Runnable` instances. **TYPE:** `[Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output] | [Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable "<code>collections.abc.Callable</code>")[[], [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span>")[Input, Output]]` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[RunnableSerializable](../../langchain_core/runnables/#langchain_core.runnables.base.RunnableSerializable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.RunnableSerializable</span>")[Input, Output]` |  A new `Runnable` with the alternatives configured.  
      
    
    from langchain_anthropic import ChatAnthropic
    from langchain_core.runnables.utils import ConfigurableField
    from langchain_openai import ChatOpenAI
    
    model = ChatAnthropic(
        model_name="claude-sonnet-4-5-20250929"
    ).configurable_alternatives(
        ConfigurableField(id="llm"),
        default_key="anthropic",
        openai=ChatOpenAI(),
    )
    
    # uses the default model ChatAnthropic
    print(model.invoke("which organization created you?").content)
    
    # uses ChatOpenAI
    print(
        model.with_config(configurable={"llm": "openai"})
        .invoke("which organization created you?")
        .content
    )
    

####  `` validate_search_type `classmethod` ¶
    
    
    validate_search_type(values: [dict](https://docs.python.org/3/library/stdtypes.html#dict)) -> [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    

Validate search type.

PARAMETER | DESCRIPTION  
---|---  
`values` |  Values to validate. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)`  
RETURNS | DESCRIPTION  
---|---  
`[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` |  Validated values.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `search_type` is not one of the allowed search types.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `score_threshold` is not specified with a float value(`0~1`)  
  
####  `` add_documents ¶
    
    
    add_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Add documents to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Other keyword arguments that subclasses might use. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
####  `` aadd_documents `async` ¶
    
    
    aadd_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Async add documents to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Other keyword arguments that subclasses might use. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
###  `` InMemorySemanticCache ¶

Bases: `[BaseCache](../../langchain_core/caches/#langchain_core.caches.BaseCache "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseCache</span> \(<code>langchain_core.caches.BaseCache</code>\)")`

Cache that uses MemoryDB as a vector-store backend.

METHOD | DESCRIPTION  
---|---  
`alookup` |  Async look up based on `prompt` and `llm_string`.  
`aupdate` |  Async update cache based on `prompt` and `llm_string`.  
`aclear` |  Async clear cache that can take additional keyword arguments.  
`__init__` |  Initialize by passing in the `init` GPTCache func  
`clear` |  Clear semantic cache for a given llm_string.  
`lookup` |  Look up based on prompt and llm_string.  
`update` |  Update cache based on prompt and llm_string.  
  
####  `` alookup `async` ¶
    
    
    alookup(prompt: [str](https://docs.python.org/3/library/stdtypes.html#str), llm_string: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> RETURN_VAL_TYPE | None
    

Async look up based on `prompt` and `llm_string`.

A cache implementation is expected to generate a key from the 2-tuple of `prompt` and `llm_string` (e.g., by concatenating them with a delimiter).

PARAMETER | DESCRIPTION  
---|---  
`prompt` |  A string representation of the prompt. In the case of a chat model, the prompt is a non-trivial serialization of the prompt into the language model. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`llm_string` |  A string representation of the LLM configuration. This is used to capture the invocation parameters of the LLM (e.g., model name, temperature, stop tokens, max tokens, etc.). These invocation parameters are serialized into a string representation. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
RETURNS | DESCRIPTION  
---|---  
`RETURN_VAL_TYPE | None` |  On a cache miss, return `None`. On a cache hit, return the cached value.  
`RETURN_VAL_TYPE | None` |  The cached value is a list of `Generation` (or subclasses).  
  
####  `` aupdate `async` ¶
    
    
    aupdate(prompt: [str](https://docs.python.org/3/library/stdtypes.html#str), llm_string: [str](https://docs.python.org/3/library/stdtypes.html#str), return_val: RETURN_VAL_TYPE) -> None
    

Async update cache based on `prompt` and `llm_string`.

The prompt and llm_string are used to generate a key for the cache. The key should match that of the look up method.

PARAMETER | DESCRIPTION  
---|---  
`prompt` |  A string representation of the prompt. In the case of a chat model, the prompt is a non-trivial serialization of the prompt into the language model. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`llm_string` |  A string representation of the LLM configuration. This is used to capture the invocation parameters of the LLM (e.g., model name, temperature, stop tokens, max tokens, etc.). These invocation parameters are serialized into a string representation. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`return_val` |  The value to be cached. The value is a list of `Generation` (or subclasses). **TYPE:** `RETURN_VAL_TYPE`  
  
####  `` aclear `async` ¶
    
    
    aclear(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

Async clear cache that can take additional keyword arguments.

####  `` __init__ ¶
    
    
    __init__(redis_url: [str](https://docs.python.org/3/library/stdtypes.html#str), embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"), score_threshold: [float](https://docs.python.org/3/library/functions.html#float) = 0.2)
    

Initialize by passing in the `init` GPTCache func

PARAMETER | DESCRIPTION  
---|---  
`redis_url` |  URL to connect to MemoryDB. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`embedding` |  Embedding provider for semantic encoding and search. **TYPE:** `Embedding`  
`score_threshold` |  **TYPE:** `([float](https://docs.python.org/3/library/functions.html#float), 0.2)` **DEFAULT:** `0.2`  
  
Example: ```python from langchain_core.globals import set_llm_cache
    
    
    from langchain_aws.cache import InMemorySemanticCache
    
    set_llm_cache(InMemorySemanticCache(
        redis_url="redis://localhost:6379",
        embedding=OpenAIEmbeddings()
    ))
    ```
    

####  `` clear ¶
    
    
    clear(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> None
    

Clear semantic cache for a given llm_string.

####  `` lookup ¶
    
    
    lookup(prompt: [str](https://docs.python.org/3/library/stdtypes.html#str), llm_string: [str](https://docs.python.org/3/library/stdtypes.html#str)) -> RETURN_VAL_TYPE | None
    

Look up based on prompt and llm_string.

####  `` update ¶
    
    
    update(prompt: [str](https://docs.python.org/3/library/stdtypes.html#str), llm_string: [str](https://docs.python.org/3/library/stdtypes.html#str), return_val: RETURN_VAL_TYPE) -> None
    

Update cache based on prompt and llm_string.

###  `` InMemoryVectorStore ¶

Bases: `[VectorStore](../../langchain_core/vectorstores/#langchain_core.vectorstores.base.VectorStore "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.vectorstores.base.VectorStore</span> \(<code>langchain_core.vectorstores.VectorStore</code>\)")`

InMemoryVectorStore vector database.

To use, you should have the `redis` python package installed for AWS MemoryDB:
    
    
    ```bash
    pip install redis
    ```
    

Once running, you can connect to the MemoryDB server with the following url schemas: \- redis://: # simple connection \- redis://:@: # connection with authentication \- rediss://: # connection with SSL \- rediss://:@: # connection with SSL and auth

Examples:

The following examples show various ways to use the Redis VectorStore with LangChain.

For all the following examples assume we have the following imports
    
    
    from langchain_aws.vectorstores import InMemoryVectorStore
    

Initialize, create index, and load Documents: 
    
    
    from langchain_aws.vectorstores import InMemoryVectorStore
    
    rds = InMemoryVectorStore.from_documents(
        documents, # a list of Document objects from loaders or created
        embeddings, # an Embeddings object
        redis_url="redis://cluster_endpoint:6379",
    )
    

Initialize, create index, and load Documents with metadata: 
    
    
    rds = InMemoryVectorStore.from_texts(
        texts, # a list of strings
        metadata, # a list of metadata dicts
        embeddings, # an Embeddings object
        redis_url="redis://cluster_endpoint:6379",
    )
    

Initialize, create index, and load Documents with metadata and return keys
    
    
    ```python
    rds, keys = InMemoryVectorStore.from_texts_return_keys(
        texts, # a list of strings
        metadata, # a list of metadata dicts
        embeddings, # an Embeddings object
        redis_url="redis://cluster_endpoint:6379",
    )
    ```
    

For use cases where the index needs to stay alive, you can initialize with an index name such that it's easier to reference later
    
    
    ```python
    rds = InMemoryVectorStore.from_texts(
        texts, # a list of strings
        metadata, # a list of metadata dicts
        embeddings, # an Embeddings object
        index_name="my-index",
        redis_url="redis://cluster_endpoint:6379",
    )
    ```
    

Initialize and connect to an existing index (from above)
    
    
    ```python
    # must pass in schema and key_prefix from another index
    existing_rds = InMemoryVectorStore.from_existing_index(
        embeddings, # an Embeddings object
        index_name="my-index",
        schema=rds.schema, # schema dumped from another index
        key_prefix=rds.key_prefix, # key prefix from another index
        redis_url="redis://username:password@cluster_endpoint:6379",
    )
    ```
    

Advanced examples:

Custom vector schema can be supplied to change the way that MemoryDB creates the underlying vector schema. This is useful for production use cases where you want to optimize the vector schema for your use case. ex. using HNSW instead of FLAT (knn) which is the default
    
    
    ```python
    vector_schema = {
        "algorithm": "HNSW"
    }
    
    rds = InMemoryVectorStore.from_texts(
        texts, # a list of strings
        metadata, # a list of metadata dicts
        embeddings, # an Embeddings object
        vector_schema=vector_schema,
        redis_url="redis://cluster_endpoint:6379",
    )
    ```
    

Custom index schema can be supplied to change the way that the metadata is indexed. This is useful for you would like to use the hybrid querying (filtering) capability of MemoryDB.

By default, this implementation will automatically generate the index schema according to the following rules: \- All strings are indexed as text fields \- All numbers are indexed as numeric fields \- All lists of strings are indexed as tag fields (joined by langchain_aws.vectorstores.inmemorydb.constants.INMEMORYDB_TAG_SEPARATOR) \- All None values are not indexed but still stored in MemoryDB these are not retrievable through the interface here, but the raw MemoryDB client can be used to retrieve them. \- All other types are not indexed

To override these rules, you can pass in a custom index schema like the following
    
    
    ```yaml
    tag:
        - name: credit_score
    text:
        - name: user
        - name: job
    ```
    

Typically, the `credit_score` field would be a text field since it's a string, however, we can override this behavior by specifying the field type as shown with the yaml config (can also be a dictionary) above and the code below.
    
    
    ```python
    rds = InMemoryVectorStore.from_texts(
        texts, # a list of strings
        metadata, # a list of metadata dicts
        embeddings, # an Embeddings object
        index_schema="path/to/index_schema.yaml", # can also be a dictionary
        redis_url="redis://cluster_endpoint:6379",
    )
    ```
    

When connecting to an existing index where a custom schema has been applied, it's important to pass in the same schema to the `from_existing_index` method. Otherwise, the schema for newly added samples will be incorrect and metadata will not be returned.

METHOD | DESCRIPTION  
---|---  
`get_by_ids` |  Get documents by their IDs.  
`aget_by_ids` |  Async get documents by their IDs.  
`adelete` |  Async delete by vector ID or other criteria.  
`aadd_texts` |  Async run more texts through the embeddings and add to the `VectorStore`.  
`add_documents` |  Add or update documents in the `VectorStore`.  
`aadd_documents` |  Async run more documents through the embeddings and add to the `VectorStore`.  
`search` |  Return docs most similar to query using a specified search type.  
`asearch` |  Async return docs most similar to query using a specified search type.  
`asimilarity_search_with_score` |  Async run similarity search with distance.  
`similarity_search_with_relevance_scores` |  Return docs and relevance scores in the range `[0, 1]`.  
`asimilarity_search_with_relevance_scores` |  Async return docs and relevance scores in the range `[0, 1]`.  
`asimilarity_search` |  Async return docs most similar to query.  
`asimilarity_search_by_vector` |  Async return docs most similar to embedding vector.  
`amax_marginal_relevance_search` |  Async return docs selected using the maximal marginal relevance.  
`max_marginal_relevance_search_by_vector` |  Return docs selected using the maximal marginal relevance.  
`amax_marginal_relevance_search_by_vector` |  Async return docs selected using the maximal marginal relevance.  
`from_documents` |  Return `VectorStore` initialized from documents and embeddings.  
`afrom_documents` |  Async return `VectorStore` initialized from documents and embeddings.  
`afrom_texts` |  Async return `VectorStore` initialized from texts and embeddings.  
`__init__` |  Initialize MemoryDB vector store with necessary components.  
`from_texts_return_keys` |  Create a InMemoryVectorStore vectorstore from raw documents.  
`from_texts` |  Create a InMemoryVectorStore vectorstore from a list of texts.  
`from_existing_index` |  Connect to an existing InMemoryVectorStore index.  
`write_schema` |  Write the schema to a yaml file.  
`delete` |  Delete a InMemoryVectorStore entry.  
`drop_index` |  Drop a InMemoryVectorStore search index.  
`add_texts` |  Add more texts to the `VectorStore`.  
`as_retriever` |  Return `VectorStoreRetriever` initialized from this `VectorStore`.  
`similarity_search_with_score` |  Run similarity search with **vector distance**.  
`similarity_search` |  Run similarity search  
`similarity_search_by_vector` |  Run similarity search between a query vector and the indexed vectors.  
`max_marginal_relevance_search` |  Return docs selected using the maximal marginal relevance.  
  
####  `` embeddings `property` ¶
    
    
    embeddings: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)") | None
    

Access the query embedding object if available.

####  `` schema `property` ¶
    
    
    schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [list](https://docs.python.org/3/library/stdtypes.html#list)[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")]]
    

Return the schema of the index.

####  `` get_by_ids ¶
    
    
    get_by_ids(ids: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Get documents by their IDs.

The returned documents are expected to have the ID field set to the ID of the document in the vector store.

Fewer documents may be returned than requested if some IDs are not found or if there are duplicated IDs.

Users should not assume that the order of the returned documents matches the order of the input IDs. Instead, users should rely on the ID field of the returned documents.

This method should **NOT** raise exceptions if no documents are found for some IDs.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to retrieve. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects.  
  
####  `` aget_by_ids `async` ¶
    
    
    aget_by_ids(ids: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async get documents by their IDs.

The returned documents are expected to have the ID field set to the ID of the document in the vector store.

Fewer documents may be returned than requested if some IDs are not found or if there are duplicated IDs.

Users should not assume that the order of the returned documents matches the order of the input IDs. Instead, users should rely on the ID field of the returned documents.

This method should **NOT** raise exceptions if no documents are found for some IDs.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to retrieve. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects.  
  
####  `` adelete `async` ¶
    
    
    adelete(ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [bool](https://docs.python.org/3/library/functions.html#bool) | None
    

Async delete by vector ID or other criteria.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to delete. If `None`, delete all. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Other keyword arguments that subclasses might use. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool) | None` |  `True` if deletion is successful, `False` otherwise, `None` if not implemented.  
  
####  `` aadd_texts `async` ¶
    
    
    aadd_texts(
        texts: [Iterable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable "<code>collections.abc.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Async run more texts through the embeddings and add to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Iterable of strings to add to the `VectorStore`. **TYPE:** `[Iterable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable "<code>collections.abc.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`metadatas` |  Optional list of metadatas associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  `VectorStore` specific parameters. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs from adding the texts into the `VectorStore`.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of metadatas does not match the number of texts.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of IDs does not match the number of texts.  
  
####  `` add_documents ¶
    
    
    add_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Add or update documents in the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Additional keyword arguments. If kwargs contains IDs and documents contain ids, the IDs in the kwargs will receive precedence. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
####  `` aadd_documents `async` ¶
    
    
    aadd_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Async run more documents through the embeddings and add to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
####  `` search ¶
    
    
    search(query: [str](https://docs.python.org/3/library/stdtypes.html#str), search_type: [str](https://docs.python.org/3/library/stdtypes.html#str), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs most similar to query using a specified search type.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`search_type` |  Type of search to perform. Can be `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `search_type` is not one of `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`.  
  
####  `` asearch `async` ¶
    
    
    asearch(query: [str](https://docs.python.org/3/library/stdtypes.html#str), search_type: [str](https://docs.python.org/3/library/stdtypes.html#str), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to query using a specified search type.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`search_type` |  Type of search to perform. Can be `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `search_type` is not one of `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`.  
  
####  `` asimilarity_search_with_score `async` ¶
    
    
    asimilarity_search_with_score(
        *args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Async run similarity search with distance.

PARAMETER | DESCRIPTION  
---|---  
`*args` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `()`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`.  
  
####  `` similarity_search_with_relevance_scores ¶
    
    
    similarity_search_with_relevance_scores(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Return docs and relevance scores in the range `[0, 1]`.

`0` is dissimilar, `1` is most similar.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  kwargs to be passed to similarity search. Should include `score_threshold`, An optional floating point value between `0` to `1` to filter the resulting set of retrieved docs **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`.  
  
####  `` asimilarity_search_with_relevance_scores `async` ¶
    
    
    asimilarity_search_with_relevance_scores(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Async return docs and relevance scores in the range `[0, 1]`.

`0` is dissimilar, `1` is most similar.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  kwargs to be passed to similarity search. Should include `score_threshold`, An optional floating point value between `0` to `1` to filter the resulting set of retrieved docs **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`  
  
####  `` asimilarity_search `async` ¶
    
    
    asimilarity_search(query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to query.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
  
####  `` asimilarity_search_by_vector `async` ¶
    
    
    asimilarity_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)], k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to embedding vector.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query vector.  
  
####  `` amax_marginal_relevance_search `async` ¶
    
    
    amax_marginal_relevance_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20, lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Text to look up documents similar to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` max_marginal_relevance_search_by_vector ¶
    
    
    max_marginal_relevance_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)],
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20,
        lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` amax_marginal_relevance_search_by_vector `async` ¶
    
    
    amax_marginal_relevance_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)],
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20,
        lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` from_documents `classmethod` ¶
    
    
    from_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Return `VectorStore` initialized from documents and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  List of `Document` objects to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from documents and embeddings.  
  
####  `` afrom_documents `async` `classmethod` ¶
    
    
    afrom_documents(
        documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Async return `VectorStore` initialized from documents and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  List of `Document` objects to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from documents and embeddings.  
  
####  `` afrom_texts `async` `classmethod` ¶
    
    
    afrom_texts(
        texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Async return `VectorStore` initialized from texts and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Texts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`metadatas` |  Optional list of metadatas associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list of IDs associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from texts and embeddings.  
  
####  `` __init__ ¶
    
    
    __init__(
        redis_url: [str](https://docs.python.org/3/library/stdtypes.html#str),
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        index_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | None = None,
        vector_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str) | [int](https://docs.python.org/3/library/functions.html#int)] | None = None,
        relevance_score_fn: [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[[float](https://docs.python.org/3/library/functions.html#float)], [float](https://docs.python.org/3/library/functions.html#float)] | None = None,
        key_prefix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    )
    

Initialize MemoryDB vector store with necessary components.

####  `` from_texts_return_keys `classmethod` ¶
    
    
    from_texts_return_keys(
        texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        index_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | None = None,
        vector_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str) | [int](https://docs.python.org/3/library/functions.html#int)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[InMemoryVectorStore, [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]]
    

Create a InMemoryVectorStore vectorstore from raw documents.

This is a user-friendly interface that

  1. Embeds documents.
  2. Creates a new InMemoryVectorStore index if it doesn't already exist
  3. Adds the documents to the newly created InMemoryVectorStore index.
  4. Returns the keys of the newly created documents once stored.



This method will generate schema based on the metadata passed in if the `index_schema` is not defined. If the `index_schema` is defined, it will compare against the generated schema and warn if there are differences. If you are purposefully defining the schema for the metadata, then you can ignore that warning.

To examine the schema options, initialize an instance of this class and print out the schema using the `InMemoryVectorStore.schema`` property. This will include the content and content_vector classes which are always present in the langchain schema.

Example
    
    
    from langchain_aws.vectorstores import InMemoryVectorStore
                    embeddings = OpenAIEmbeddings()
    redis, keys = InMemoryVectorStore.from_texts_return_keys(
        texts,
        embeddings,
        redis_url="redis://cluster_endpoint:6379"
    )
    

PARAMETER | DESCRIPTION  
---|---  
`texts` |  List of texts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`embedding` |  Embeddings to use for the `VectorStore`. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`metadatas` |  Optional list of metadata dicts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`index_name` |  Optional name of the index to create or add to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`index_schema` |  Optional fields to index within the metadata. Overrides generated schema. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | None` **DEFAULT:** `None`  
`vector_schema` |  Optional vector schema to use. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str) | [int](https://docs.python.org/3/library/functions.html#int)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the Redis client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[InMemoryVectorStore, [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]]` |  Tuple[InMemoryVectorStore, List[str]]: Tuple of the InMemoryVectorStore instance and the keys of the newly created documents.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of metadatas does not match the number of texts.  
  
####  `` from_texts `classmethod` ¶
    
    
    from_texts(
        texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        index_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | None = None,
        vector_schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str) | [int](https://docs.python.org/3/library/functions.html#int)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> InMemoryVectorStore
    

Create a InMemoryVectorStore vectorstore from a list of texts.

This is a user-friendly interface that

  1. Embeds documents.
  2. Creates a new InMemoryVectorStore index if it doesn't already exist
  3. Adds the documents to the newly created InMemoryVectorStore index.



This method will generate schema based on the metadata passed in if the `index_schema` is not defined. If the `index_schema` is defined, it will compare against the generated schema and warn if there are differences. If you are purposefully defining the schema for the metadata, then you can ignore that warning.

To examine the schema options, initialize an instance of this class and print out the schema using the `InMemoryVectorStore.schema`` property. This will include the content and content_vector classes which are always present in the langchain schema.

Example
    
    
    from langchain_aws.vectorstores import InMemoryVectorStore
    
    embeddings = OpenAIEmbeddings()
    

PARAMETER | DESCRIPTION  
---|---  
`texts` |  List of texts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`embedding` |  Embedding model class (i.e. OpenAIEmbeddings) for embedding queries. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`metadatas` |  Optional list of metadata dicts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`index_name` |  Optional name of the index to create or add to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`index_schema` |  Optional fields to index within the metadata. Overrides generated schema. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | None` **DEFAULT:** `None`  
`vector_schema` |  Optional vector schema to use. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str) | [int](https://docs.python.org/3/library/functions.html#int)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the InMemoryVectorStore client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`InMemoryVectorStore` |  InMemoryVectorStore VectorStore instance. **TYPE:** `InMemoryVectorStore`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of metadatas does not match the number of texts.  
`[ImportError](https://docs.python.org/3/library/exceptions.html#ImportError)` |  If the redis python package is not installed.  
  
####  `` from_existing_index `classmethod` ¶
    
    
    from_existing_index(
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        schema: [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict],
        key_prefix: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> InMemoryVectorStore
    

Connect to an existing InMemoryVectorStore index.

Example
    
    
    from langchain_aws.vectorstores import InMemoryVectorStore
    
    embeddings = OpenAIEmbeddings()
    
    # must pass in schema and key_prefix from another index
    existing_rds = InMemoryVectorStore.from_existing_index(
        embeddings,
        index_name="my-index",
        schema=rds.schema, # schema dumped from another index
        key_prefix=rds.key_prefix, # key prefix from another index
        redis_url="redis://username:password@cluster_endpoint:6379",
    )
    

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding model class (i.e. OpenAIEmbeddings) for embedding queries. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`index_name` |  Name of the index to connect to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`schema` |  Schema of the index and the vector schema. Can be a dict, or path to yaml file. **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), [str](https://docs.python.org/3/library/stdtypes.html#str)] | [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>") | [dict](https://docs.python.org/3/library/stdtypes.html#dict)[[str](https://docs.python.org/3/library/stdtypes.html#str), ListOfDict]`  
`key_prefix` |  Prefix to use for all keys in InMemoryVectorStore associated with this index. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments to pass to the Redis client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`InMemoryVectorStore` |  InMemoryVectorStore VectorStore instance. **TYPE:** `InMemoryVectorStore`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the index does not exist.  
`[ImportError](https://docs.python.org/3/library/exceptions.html#ImportError)` |  If the redis python package is not installed.  
  
####  `` write_schema ¶
    
    
    write_schema(path: [str](https://docs.python.org/3/library/stdtypes.html#str) | [PathLike](https://docs.python.org/3/library/os.html#os.PathLike "<code>os.PathLike</code>")) -> None
    

Write the schema to a yaml file.

####  `` delete `staticmethod` ¶
    
    
    delete(ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Delete a InMemoryVectorStore entry.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs (keys in redis) to delete. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments. Supports `redis_url` for Redis connection url (can also be set as an environment variable: REDIS_URL). **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`bool` |  Whether or not the deletions were successful. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)`  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the redis python package is not installed.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the IDs (keys in redis) are not provided.  
  
####  `` drop_index `staticmethod` ¶
    
    
    drop_index(index_name: [str](https://docs.python.org/3/library/stdtypes.html#str), delete_documents: [bool](https://docs.python.org/3/library/functions.html#bool), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [bool](https://docs.python.org/3/library/functions.html#bool)
    

Drop a InMemoryVectorStore search index.

PARAMETER | DESCRIPTION  
---|---  
`index_name` |  Name of the index to drop. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`delete_documents` |  Whether to drop the associated documents. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)`  
RETURNS | DESCRIPTION  
---|---  
`bool` |  Whether or not the drop was successful. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)`  
  
####  `` add_texts ¶
    
    
    add_texts(
        texts: [Iterable](https://docs.python.org/3/library/typing.html#typing.Iterable "<code>typing.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        embeddings: [list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]] | None = None,
        batch_size: [int](https://docs.python.org/3/library/functions.html#int) = 1000,
        clean_metadata: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Add more texts to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Iterable of strings/text to add to the `VectorStore`. **TYPE:** `[Iterable](https://docs.python.org/3/library/typing.html#typing.Iterable "<code>typing.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`metadatas` |  Optional list of metadatas. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`embeddings` |  Optional pre-generated embeddings. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]] | None` **DEFAULT:** `None`  
`batch_size` |  Batch size to use for writes. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `1000`  
`**kwargs` |  Additional keyword arguments. Supports `keys` or `ids` for identifiers of entries. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs added to the `VectorStore`.  
  
####  `` as_retriever ¶
    
    
    as_retriever(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> InMemoryVectorStoreRetriever
    

Return `VectorStoreRetriever` initialized from this `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`**kwargs` |  Keyword arguments to pass to the search function. Can include:

  * `search_type`: Defines the type of search that the Retriever should perform. Can be `'similarity'` (default), `'mmr'`, or `'similarity_score_threshold'`.
  * `search_kwargs`: Keyword arguments to pass to the search function. Can include things like:
    * `k`: Amount of documents to return (Default: `4`)
    * `score_threshold`: Minimum relevance threshold for `similarity_score_threshold`
    * `fetch_k`: Amount of documents to pass to MMR algorithm (Default: `20`)
    * `lambda_mult`: Diversity of results returned by MMR; `1` for minimum diversity and 0 for maximum. (Default: `0.5`)
    * `filter`: Filter by document metadata

**TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[VectorStoreRetriever](../../langchain_core/vectorstores/#langchain_core.vectorstores.base.VectorStoreRetriever "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.vectorstores.base.VectorStoreRetriever</span>")` |  Retriever class for `VectorStore`.  
  
Examples: 
    
    
    # Retrieve more documents with higher diversity
    # Useful if your dataset has many similar documents
    docsearch.as_retriever(
        search_type="mmr", search_kwargs={"k": 6, "lambda_mult": 0.25}
    )
    
    # Fetch more documents for the MMR algorithm to consider
    # But only return the top 5
    docsearch.as_retriever(search_type="mmr", search_kwargs={"k": 5, "fetch_k": 50})
    
    # Only retrieve documents that have a relevance score
    # Above a certain threshold
    docsearch.as_retriever(
        search_type="similarity_score_threshold",
        search_kwargs={"score_threshold": 0.8},
    )
    
    # Only get the single most similar document from the dataset
    docsearch.as_retriever(search_kwargs={"k": 1})
    
    # Use a filter to only retrieve documents from a specific paper
    docsearch.as_retriever(
        search_kwargs={"filter": {"paper_title": "GPT-4 Technical Report"}}
    )
    

####  `` similarity_search_with_score ¶
    
    
    similarity_search_with_score(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str),
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        filter: InMemoryDBFilterExpression | None = None,
        return_metadata: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Run similarity search with **vector distance**.

The "scores" returned from this function are the raw vector distances from the query vector. For similarity scores, use `similarity_search_with_relevance_scores`.

PARAMETER | DESCRIPTION  
---|---  
`query` |  The query text for which to find similar documents. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  The number of documents to return. Default is 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Optional metadata filter. **TYPE:** `InMemoryDBFilterExpression` **DEFAULT:** `None`  
`return_metadata` |  Whether to return metadata. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List[Tuple[Document, float]]: A list of documents that are most similar to the query with the distance for each document.  
  
####  `` similarity_search ¶
    
    
    similarity_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str),
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        filter: InMemoryDBFilterExpression | None = None,
        return_metadata: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        distance_threshold: [float](https://docs.python.org/3/library/functions.html#float) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Run similarity search

PARAMETER | DESCRIPTION  
---|---  
`query` |  The query text for which to find similar documents. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  The number of documents to return. Default is 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Optional metadata filter. **TYPE:** `InMemoryDBFilterExpression` **DEFAULT:** `None`  
`return_metadata` |  Whether to return metadata. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`distance_threshold` |  Maximum vector distance between selected documents and the query vector. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List[Document]: A list of documents that are most similar to the query text.  
  
####  `` similarity_search_by_vector ¶
    
    
    similarity_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)],
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        filter: InMemoryDBFilterExpression | None = None,
        return_metadata: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        distance_threshold: [float](https://docs.python.org/3/library/functions.html#float) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Run similarity search between a query vector and the indexed vectors.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  The query vector for which to find similar documents. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  The number of documents to return. Default is 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Optional metadata filter. **TYPE:** `InMemoryDBFilterExpression` **DEFAULT:** `None`  
`return_metadata` |  Whether to return metadata. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`distance_threshold` |  Maximum vector distance between selected documents and the query vector. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List[Document]: A list of documents that are most similar to the query text.  
  
####  `` max_marginal_relevance_search ¶
    
    
    max_marginal_relevance_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str),
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20,
        lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5,
        filter: InMemoryDBFilterExpression | None = None,
        return_metadata: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        distance_threshold: [float](https://docs.python.org/3/library/functions.html#float) | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Text to look up documents similar to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of Documents to return. Defaults to 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with 0 corresponding to maximum diversity and `1` to minimum diversity. Defaults to 0.5. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`filter` |  Optional metadata filter. **TYPE:** `InMemoryDBFilterExpression` **DEFAULT:** `None`  
`return_metadata` |  Whether to return metadata. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`distance_threshold` |  Maximum vector distance between selected documents and the query vector. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float) | None` **DEFAULT:** `None`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List[Document]: A list of Documents selected by maximal marginal relevance.  
  
###  `` AmazonS3Vectors ¶

Bases: `[VectorStore](../../langchain_core/vectorstores/#langchain_core.vectorstores.base.VectorStore "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.vectorstores.base.VectorStore</span> \(<code>langchain_core.vectorstores.VectorStore</code>\)")`

S3Vectors is Amazon S3 Vectors database.

To use, you MUST first manually create a S3 vector bucket. There is no need to create a vector index. See: <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vectors-getting-started.html>

Pay attention to s3 vectors limitations and restrictions. By default, metadata for s3 vectors includes page_content and metadata for the Document. See: <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vectors-limitations.html>

Examples:

The following examples show various ways to use the AmazonS3Vectors with LangChain.

For all the following examples assume we have the following:
    
    
    ```python
    from langchain_aws.embeddings import BedrockEmbeddings
    from langchain_aws.vectorstores.s3_vectors import AmazonS3Vectors
    
    embedding = BedrockEmbeddings()
    ```
    

Initialize, create vector index if it does not exist, and add texts:
    
    
    ```python
    vector_store = AmazonS3Vectors.from_texts(
        ["hello", "developer", "wife"],
        vector_bucket_name="<vector bucket name>",
        index_name="<vector index name>",
        embedding=embedding,
    )
    ```
    

Initialize, create vector index if it does not exist, and add Documents: 
    
    
    from langchain_core.documents import Document
    
    vector_store = AmazonS3Vectors(
        vector_bucket_name="<vector bucket name>",
        index_name="<vector index name>",
        embedding=embedding,
    )
    vector_store.add_documents(
        [
            Document("Star Wars", id="key1", metadata={"genre": "scifi"}),
            Document("Jurassic Park", id="key2", metadata={"genre": "scifi"}),
            Document("Finding Nemo", id="key3", metadata={"genre": "family"}),
        ]
    )
    

Search with score(distance) and metadata filter: 
    
    
    vector_store.similarity_search_with_score(
        "adventures in space", filter={"genre": {"$eq": "family"}}
    )
    

METHOD | DESCRIPTION  
---|---  
`aget_by_ids` |  Async get documents by their IDs.  
`adelete` |  Async delete by vector ID or other criteria.  
`aadd_texts` |  Async run more texts through the embeddings and add to the `VectorStore`.  
`add_documents` |  Add or update documents in the `VectorStore`.  
`aadd_documents` |  Async run more documents through the embeddings and add to the `VectorStore`.  
`search` |  Return docs most similar to query using a specified search type.  
`asearch` |  Async return docs most similar to query using a specified search type.  
`asimilarity_search_with_score` |  Async run similarity search with distance.  
`similarity_search_with_relevance_scores` |  Return docs and relevance scores in the range `[0, 1]`.  
`asimilarity_search_with_relevance_scores` |  Async return docs and relevance scores in the range `[0, 1]`.  
`asimilarity_search` |  Async return docs most similar to query.  
`asimilarity_search_by_vector` |  Async return docs most similar to embedding vector.  
`max_marginal_relevance_search` |  Return docs selected using the maximal marginal relevance.  
`amax_marginal_relevance_search` |  Async return docs selected using the maximal marginal relevance.  
`max_marginal_relevance_search_by_vector` |  Return docs selected using the maximal marginal relevance.  
`amax_marginal_relevance_search_by_vector` |  Async return docs selected using the maximal marginal relevance.  
`from_documents` |  Return `VectorStore` initialized from documents and embeddings.  
`afrom_documents` |  Async return `VectorStore` initialized from documents and embeddings.  
`afrom_texts` |  Async return `VectorStore` initialized from texts and embeddings.  
`__init__` |  Create a AmazonS3Vectors.  
`add_texts` |  Add more texts to the `VectorStore`.  
`delete` |  Delete by vector ID or delete index.  
`get_by_ids` |  Get documents by their IDs.  
`similarity_search` |  Return docs most similar to query.  
`similarity_search_with_score` |  Run similarity search with score(distance).  
`similarity_search_by_vector` |  Return docs most similar to embedding vector.  
`as_retriever` |  Return AmazonS3VectorsRetriever initialized from this AmazonS3Vectors.  
`from_texts` |  Return AmazonS3Vectors initialized from texts and embeddings.  
  
####  `` embeddings `property` ¶
    
    
    embeddings: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)") | None
    

Access the query embedding object if available.

####  `` aget_by_ids `async` ¶
    
    
    aget_by_ids(ids: [Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async get documents by their IDs.

The returned documents are expected to have the ID field set to the ID of the document in the vector store.

Fewer documents may be returned than requested if some IDs are not found or if there are duplicated IDs.

Users should not assume that the order of the returned documents matches the order of the input IDs. Instead, users should rely on the ID field of the returned documents.

This method should **NOT** raise exceptions if no documents are found for some IDs.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to retrieve. **TYPE:** `[Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "<code>collections.abc.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects.  
  
####  `` adelete `async` ¶
    
    
    adelete(ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [bool](https://docs.python.org/3/library/functions.html#bool) | None
    

Async delete by vector ID or other criteria.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to delete. If `None`, delete all. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Other keyword arguments that subclasses might use. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool) | None` |  `True` if deletion is successful, `False` otherwise, `None` if not implemented.  
  
####  `` aadd_texts `async` ¶
    
    
    aadd_texts(
        texts: [Iterable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable "<code>collections.abc.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Async run more texts through the embeddings and add to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Iterable of strings to add to the `VectorStore`. **TYPE:** `[Iterable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable "<code>collections.abc.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`metadatas` |  Optional list of metadatas associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  `VectorStore` specific parameters. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs from adding the texts into the `VectorStore`.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of metadatas does not match the number of texts.  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If the number of IDs does not match the number of texts.  
  
####  `` add_documents ¶
    
    
    add_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Add or update documents in the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Additional keyword arguments. If kwargs contains IDs and documents contain ids, the IDs in the kwargs will receive precedence. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
####  `` aadd_documents `async` ¶
    
    
    aadd_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Async run more documents through the embeddings and add to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  Documents to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs of the added texts.  
  
####  `` search ¶
    
    
    search(query: [str](https://docs.python.org/3/library/stdtypes.html#str), search_type: [str](https://docs.python.org/3/library/stdtypes.html#str), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs most similar to query using a specified search type.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`search_type` |  Type of search to perform. Can be `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `search_type` is not one of `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`.  
  
####  `` asearch `async` ¶
    
    
    asearch(query: [str](https://docs.python.org/3/library/stdtypes.html#str), search_type: [str](https://docs.python.org/3/library/stdtypes.html#str), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to query using a specified search type.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`search_type` |  Type of search to perform. Can be `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
RAISES | DESCRIPTION  
---|---  
`[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)` |  If `search_type` is not one of `'similarity'`, `'mmr'`, or `'similarity_score_threshold'`.  
  
####  `` asimilarity_search_with_score `async` ¶
    
    
    asimilarity_search_with_score(
        *args: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Async run similarity search with distance.

PARAMETER | DESCRIPTION  
---|---  
`*args` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `()`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`.  
  
####  `` similarity_search_with_relevance_scores ¶
    
    
    similarity_search_with_relevance_scores(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Return docs and relevance scores in the range `[0, 1]`.

`0` is dissimilar, `1` is most similar.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  kwargs to be passed to similarity search. Should include `score_threshold`, An optional floating point value between `0` to `1` to filter the resulting set of retrieved docs **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`.  
  
####  `` asimilarity_search_with_relevance_scores `async` ¶
    
    
    asimilarity_search_with_relevance_scores(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Async return docs and relevance scores in the range `[0, 1]`.

`0` is dissimilar, `1` is most similar.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  kwargs to be passed to similarity search. Should include `score_threshold`, An optional floating point value between `0` to `1` to filter the resulting set of retrieved docs **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of tuples of `(doc, similarity_score)`  
  
####  `` asimilarity_search `async` ¶
    
    
    asimilarity_search(query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to query.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
  
####  `` asimilarity_search_by_vector `async` ¶
    
    
    asimilarity_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)], k: [int](https://docs.python.org/3/library/functions.html#int) = 4, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs most similar to embedding vector.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query vector.  
  
####  `` max_marginal_relevance_search ¶
    
    
    max_marginal_relevance_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20, lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Text to look up documents similar to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` amax_marginal_relevance_search `async` ¶
    
    
    amax_marginal_relevance_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20, lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Text to look up documents similar to. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` max_marginal_relevance_search_by_vector ¶
    
    
    max_marginal_relevance_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)],
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20,
        lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` amax_marginal_relevance_search_by_vector `async` ¶
    
    
    amax_marginal_relevance_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)],
        k: [int](https://docs.python.org/3/library/functions.html#int) = 4,
        fetch_k: [int](https://docs.python.org/3/library/functions.html#int) = 20,
        lambda_mult: [float](https://docs.python.org/3/library/functions.html#float) = 0.5,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of `Document` objects to return. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`fetch_k` |  Number of `Document` objects to fetch to pass to MMR algorithm. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `20`  
`lambda_mult` |  Number between `0` and `1` that determines the degree of diversity among the results with `0` corresponding to maximum diversity and `1` to minimum diversity. **TYPE:** `[float](https://docs.python.org/3/library/functions.html#float)` **DEFAULT:** `0.5`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects selected by maximal marginal relevance.  
  
####  `` from_documents `classmethod` ¶
    
    
    from_documents(documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Return `VectorStore` initialized from documents and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  List of `Document` objects to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from documents and embeddings.  
  
####  `` afrom_documents `async` `classmethod` ¶
    
    
    afrom_documents(
        documents: [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")], embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"), **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Async return `VectorStore` initialized from documents and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`documents` |  List of `Document` objects to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from documents and embeddings.  
  
####  `` afrom_texts `async` `classmethod` ¶
    
    
    afrom_texts(
        texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")
    

Async return `VectorStore` initialized from texts and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Texts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`metadatas` |  Optional list of metadatas associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list of IDs associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[Self](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Self "<code>typing_extensions.Self</code>")` |  `VectorStore` initialized from texts and embeddings.  
  
####  `` __init__ ¶
    
    
    __init__(
        *,
        vector_bucket_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        data_type: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["float32"] = "float32",
        distance_metric: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["euclidean", "cosine"] = "cosine",
        non_filterable_metadata_keys: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        page_content_metadata_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = "_page_content",
        create_index_if_not_exist: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        relevance_score_fn: [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[[float](https://docs.python.org/3/library/functions.html#float)], [float](https://docs.python.org/3/library/functions.html#float)] | None = None,
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)") | None = None,
        region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_access_key_id: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_secret_access_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_session_token: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    )
    

Create a AmazonS3Vectors.

PARAMETER | DESCRIPTION  
---|---  
`vector_bucket_name` |  The name of an existing S3 vector bucket **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`index_name` |  The name of the S3 vector index. The index names must be 3 to 63 characters long, start and end with a letter or number, and contain only lowercase letters, numbers, hyphens and dots. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`data_type` |  The data type of the vectors to be inserted into the vector index. Default is "float32". **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['float32']` **DEFAULT:** `'float32'`  
`distance_metric` |  The distance metric to be used for similarity search. Default is "cosine". **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['euclidean', 'cosine']` **DEFAULT:** `'cosine'`  
`non_filterable_metadata_keys` |  Non-filterable metadata keys **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`page_content_metadata_key` |  Key of metadata to store page_content in Document. If None, embedding page_content but stored as an empty string. Default is `_page_content`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `'_page_content'`  
`create_index_if_not_exist` |  Automatically create vector index if it does not exist. Default is True. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`relevance_score_fn` |  The 'correct' relevance function. **TYPE:** `[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[[float](https://docs.python.org/3/library/functions.html#float)], [float](https://docs.python.org/3/library/functions.html#float)] | None` **DEFAULT:** `None`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)") | None` **DEFAULT:** `None`  
`region_name` |  The aws region where the Sagemaker model is deployed, eg. `us-west-2`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`credentials_profile_name` |  The name of the profile in the ~/.aws/credentials or ~/.aws/config files, which has either access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_access_key_id` |  AWS access key id. If provided, aws_secret_access_key must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_secret_access_key` |  AWS secret_access_key. If provided, aws_access_key_id must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_session_token` |  AWS session token. If provided, aws_access_key_id and aws_secret_access_key must also be provided. Not required unless using temporary credentials. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SESSION_TOKEN` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`endpoint_url` |  Needed if you don't want to default to us-east-1 endpoint **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`config` |  An optional `botocore.config.Config` instance to pass to the client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`client` |  Boto3 client for s3vectors **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
  
####  `` add_texts ¶
    
    
    add_texts(
        texts: [Iterable](https://docs.python.org/3/library/typing.html#typing.Iterable "<code>typing.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        batch_size: [int](https://docs.python.org/3/library/functions.html#int) = 200,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]
    

Add more texts to the `VectorStore`.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Iterable of strings/text to add to the `VectorStore`. **TYPE:** `[Iterable](https://docs.python.org/3/library/typing.html#typing.Iterable "<code>typing.Iterable</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`metadatas` |  Optional list of metadatas. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list of IDs associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`batch_size` |  Batch size for `put_vectors`. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `200`  
`kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]` |  List of IDs added to the `VectorStore`.  
  
####  `` delete ¶
    
    
    delete(
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None, *, batch_size: [int](https://docs.python.org/3/library/functions.html#int) = 500, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [bool](https://docs.python.org/3/library/functions.html#bool) | None
    

Delete by vector ID or delete index.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of IDs to delete vectors. If `None`, delete index with all vectors. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`batch_size` |  Batch size for `delete_vectors`. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `500`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[bool](https://docs.python.org/3/library/functions.html#bool) | None` |  Always `True`.  
  
####  `` get_by_ids ¶
    
    
    get_by_ids(ids: [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)], /, *, batch_size: [int](https://docs.python.org/3/library/functions.html#int) = 100) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Get documents by their IDs.

PARAMETER | DESCRIPTION  
---|---  
`ids` |  List of id. **TYPE:** `[Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence "<code>typing.Sequence</code>")[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`batch_size` |  Batch size for get_vectors. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `100`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects.  
  
####  `` similarity_search ¶
    
    
    similarity_search(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, *, filter: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs most similar to query.

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of Documents to return. Defaults to 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Metadata filter to apply during the query. See: <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vectors-metadata-filtering.html> **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | None` **DEFAULT:** `None`  
`**kwargs` |  Arguments to pass to the search method. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query.  
  
####  `` similarity_search_with_score ¶
    
    
    similarity_search_with_score(
        query: [str](https://docs.python.org/3/library/stdtypes.html#str), k: [int](https://docs.python.org/3/library/functions.html#int) = 4, *, filter: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]
    

Run similarity search with score(distance).

PARAMETER | DESCRIPTION  
---|---  
`query` |  Input text. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`k` |  Number of Documents to return. Defaults to 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Metadata filter to apply during the query. See: <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vectors-metadata-filtering.html> **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)"), [float](https://docs.python.org/3/library/functions.html#float)]]` |  List of Tuples of (doc, distance).  
  
####  `` similarity_search_by_vector ¶
    
    
    similarity_search_by_vector(
        embedding: [list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)], k: [int](https://docs.python.org/3/library/functions.html#int) = 4, *, filter: [dict](https://docs.python.org/3/library/stdtypes.html#dict) | None = None, **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")
    ) -> [list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]
    

Return docs most similar to embedding vector.

PARAMETER | DESCRIPTION  
---|---  
`embedding` |  Embedding to look up documents similar to. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[float](https://docs.python.org/3/library/functions.html#float)]`  
`k` |  Number of Documents to return. Defaults to 4. **TYPE:** `[int](https://docs.python.org/3/library/functions.html#int)` **DEFAULT:** `4`  
`filter` |  Metadata filter to apply during the query. See: <https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vectors-metadata-filtering.html> **TYPE:** `[dict](https://docs.python.org/3/library/stdtypes.html#dict) | None` **DEFAULT:** `None`  
`**kwargs` |  Additional keyword arguments. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`[list](https://docs.python.org/3/library/stdtypes.html#list)[[Document](../../langchain_core/documents/#langchain_core.documents.base.Document "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.documents.base.Document</span> \(<code>langchain_core.documents.Document</code>\)")]` |  List of `Document` objects most similar to the query vector.  
  
####  `` as_retriever ¶
    
    
    as_retriever(**kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")) -> AmazonS3VectorsRetriever
    

Return AmazonS3VectorsRetriever initialized from this AmazonS3Vectors.

####  `` from_texts `classmethod` ¶
    
    
    from_texts(
        texts: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)],
        embedding: [Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)"),
        metadatas: [list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None = None,
        *,
        ids: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        vector_bucket_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        index_name: [str](https://docs.python.org/3/library/stdtypes.html#str),
        data_type: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["float32"] = "float32",
        distance_metric: [Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")["euclidean", "cosine"] = "cosine",
        non_filterable_metadata_keys: [list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None = None,
        page_content_metadata_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = "_page_content",
        create_index_if_not_exist: [bool](https://docs.python.org/3/library/functions.html#bool) = True,
        relevance_score_fn: [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[[float](https://docs.python.org/3/library/functions.html#float)], [float](https://docs.python.org/3/library/functions.html#float)] | None = None,
        region_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        credentials_profile_name: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_access_key_id: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_secret_access_key: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        aws_session_token: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        endpoint_url: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        config: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        client: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>") = None,
        **kwargs: [Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"),
    ) -> AmazonS3Vectors
    

Return AmazonS3Vectors initialized from texts and embeddings.

PARAMETER | DESCRIPTION  
---|---  
`texts` |  Texts to add to the `VectorStore`. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)]`  
`embedding` |  Embedding function to use. **TYPE:** `[Embeddings](../../langchain/embeddings/#langchain.embeddings.Embeddings "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Embeddings</span> \(<code>langchain_core.embeddings.Embeddings</code>\)")`  
`metadatas` |  Optional list of metadatas associated with the texts. Default is None. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[dict](https://docs.python.org/3/library/stdtypes.html#dict)] | None` **DEFAULT:** `None`  
`ids` |  Optional list of IDs associated with the texts. **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`vector_bucket_name` |  The name of an existing S3 vector bucket **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`index_name` |  The name of the S3 vector index. The index names must be 3 to 63 characters long, start and end with a letter or number, and contain only lowercase letters, numbers, hyphens and dots. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str)`  
`data_type` |  The data type of the vectors to be inserted into the vector index. Default is "float32". **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['float32']` **DEFAULT:** `'float32'`  
`distance_metric` |  The distance metric to be used for similarity search. Default is "cosine". **TYPE:** `[Literal](https://docs.python.org/3/library/typing.html#typing.Literal "<code>typing.Literal</code>")['euclidean', 'cosine']` **DEFAULT:** `'cosine'`  
`non_filterable_metadata_keys` |  Non-filterable metadata keys **TYPE:** `[list](https://docs.python.org/3/library/stdtypes.html#list)[[str](https://docs.python.org/3/library/stdtypes.html#str)] | None` **DEFAULT:** `None`  
`page_content_metadata_key` |  Key of metadata to store page_content in Document. If None, embedding page_content but stored as an empty string. Default is "_page_content". **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `'_page_content'`  
`create_index_if_not_exist` |  Automatically create vector index if it does not exist. Default is True. **TYPE:** `[bool](https://docs.python.org/3/library/functions.html#bool)` **DEFAULT:** `True`  
`relevance_score_fn` |  The 'correct' relevance function. **TYPE:** `[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "<code>typing.Callable</code>")[[[float](https://docs.python.org/3/library/functions.html#float)], [float](https://docs.python.org/3/library/functions.html#float)] | None` **DEFAULT:** `None`  
`region_name` |  The aws region where the Sagemaker model is deployed, eg. `us-west-2`. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`credentials_profile_name` |  The name of the profile in the ~/.aws/credentials or ~/.aws/config files, which has either access keys or role information specified. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_access_key_id` |  AWS access key id. If provided, aws_secret_access_key must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_ACCESS_KEY_ID` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_secret_access_key` |  AWS secret_access_key. If provided, aws_access_key_id must also be provided. If not specified, the default credential profile or, if on an EC2 instance, credentials from IMDS will be used. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SECRET_ACCESS_KEY` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`aws_session_token` |  AWS session token. If provided, aws_access_key_id and aws_secret_access_key must also be provided. Not required unless using temporary credentials. See: <https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html> If not provided, will be read from `AWS_SESSION_TOKEN` environment variable. **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`endpoint_url` |  Needed if you don't want to default to us-east-1 endpoint **TYPE:** `[str](https://docs.python.org/3/library/stdtypes.html#str) | None` **DEFAULT:** `None`  
`config` |  An optional `botocore.config.Config` instance to pass to the client. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`client` |  Boto3 client for s3vectors **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `None`  
`kwargs` |  Arguments to pass to AmazonS3Vectors. **TYPE:** `[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>")` **DEFAULT:** `{}`  
RETURNS | DESCRIPTION  
---|---  
`AmazonS3Vectors` |  AmazonS3Vectors initialized from texts and embeddings.  
  
###  `` create_neptune_opencypher_qa_chain ¶
    
    
    create_neptune_opencypher_qa_chain(
        llm: [BaseLanguageModel](../../langchain_core/language_models/#langchain_core.language_models.base.BaseLanguageModel "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseLanguageModel</span> \(<code>langchain_core.language_models.BaseLanguageModel</code>\)"),
        graph: BaseNeptuneGraph,
        qa_prompt: BasePromptTemplate = CYPHER_QA_PROMPT,
        cypher_prompt: BasePromptTemplate | None = None,
        return_intermediate_steps: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        return_direct: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        extra_instructions: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        allow_dangerous_requests: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")
    

Chain for question-answering against a Neptune graph by generating openCypher statements.

_Security note_ : Make sure that the database connection uses credentials that are narrowly-scoped to only include necessary permissions. Failure to do so may result in data corruption or loss, since the calling code may attempt commands that would result in deletion, mutation of data if appropriately prompted or reading sensitive data if such data is present in the database. The best way to guard against such negative outcomes is to (as appropriate) limit the permissions granted to the credentials used with this tool.
    
    
    See https://docs.langchain.com/oss/python/security-policy for more information.
    

Example
    
    
    chain = create_neptune_opencypher_qa_chain(
        llm=llm,
        graph=graph
    )
    response = chain.invoke({"query": "your_query_here"})
    

###  `` create_neptune_sparql_qa_chain ¶
    
    
    create_neptune_sparql_qa_chain(
        llm: [BaseLanguageModel](../../langchain_core/language_models/#langchain_core.language_models.base.BaseLanguageModel "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseLanguageModel</span> \(<code>langchain_core.language_models.BaseLanguageModel</code>\)"),
        graph: NeptuneRdfGraph,
        qa_prompt: BasePromptTemplate = SPARQL_QA_PROMPT,
        sparql_prompt: BasePromptTemplate | None = None,
        return_intermediate_steps: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        return_direct: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        extra_instructions: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
        allow_dangerous_requests: [bool](https://docs.python.org/3/library/functions.html#bool) = False,
        examples: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
    ) -> [Runnable](../../langchain_core/runnables/#langchain_core.runnables.base.Runnable "<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">langchain_core.runnables.base.Runnable</span> \(<code>langchain_core.runnables.Runnable</code>\)")[[Any](https://docs.python.org/3/library/typing.html#typing.Any "<code>typing.Any</code>"), [dict](https://docs.python.org/3/library/stdtypes.html#dict)]
    

Chain for question-answering against a Neptune graph by generating SPARQL statements.

_Security note_ : Make sure that the database connection uses credentials that are narrowly-scoped to only include necessary permissions. Failure to do so may result in data corruption or loss, since the calling code may attempt commands that would result in deletion, mutation of data if appropriately prompted or reading sensitive data if such data is present in the database. The best way to guard against such negative outcomes is to (as appropriate) limit the permissions granted to the credentials used with this tool.
    
    
    See https://docs.langchain.com/oss/python/security-policy for more information.
    

Example
    
    
    chain = create_neptune_sparql_qa_chain(
        llm=llm,
        graph=graph
    )
    response = chain.invoke({"query": "your_query_here"})
    

Back to top

---
